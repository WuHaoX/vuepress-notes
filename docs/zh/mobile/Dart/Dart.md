# Dart

Dart ä¹Ÿæ˜¯ Flutter çš„åŸºç¡€ã€‚ Dart ä½œä¸º Flutter åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ºé©±åŠ¨åº”ç”¨è¿è¡Œæä¾›äº†ç¯å¢ƒï¼ŒåŒæ—¶ Dart è¿˜æ”¯æŒè®¸å¤šæ ¸å¿ƒçš„å¼€å‘ä»»åŠ¡ï¼Œä¾‹å¦‚æ ¼å¼åŒ–ï¼Œåˆ†æå’Œä»£ç æµ‹è¯•ã€‚

## ä¸€ä¸ªç®€å•çš„ Dart ç¨‹åº

ä¸‹é¢çš„åº”ç”¨ä»£ç ç”¨åˆ°äº†å¾ˆå¤šDartçš„åŸºæœ¬åŠŸèƒ½ï¼š

```dart
// Define a function.
void printInteger(int aNumber) {
  print('The number is $aNumber.'); // Print to console.
}

// This is where the app starts executing.
void main() {
  var number = 42; // Declare and initialize a variable.
  printInteger(number); // Call a function.
}
```

è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```sh
the number is 42.
```

**ä¸‹é¢æ˜¯ä¸Šè¿°åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨åˆ°çš„ä»£ç ç‰‡æ®µ**ï¼Œè¿™äº›ä»£ç ç‰‡æ®µé€‚ç”¨äºæ‰€æœ‰ï¼ˆæˆ–å‡ ä¹æ‰€æœ‰ï¼‰çš„ Dart åº”ç”¨ï¼š

1. // æ³¨é‡Šã€‚

ä»¥åŒæ–œæ å¼€å¤´çš„ä¸€è¡Œè¯­å¥ç§°ä¸ºå•è¡Œæ³¨é‡Šã€‚Dart åŒæ ·æ”¯æŒå¤šè¡Œæ³¨é‡Šå’Œæ–‡æ¡£æ³¨é‡Š

2. void

ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå€¼æ°¸è¿œä¸ä¼šè¢«ä½¿ç”¨ã€‚ç±»ä¼¼äº main() å’Œ printInteger() çš„å‡½æ•°ï¼Œä»¥ void å£°æ˜çš„å‡½æ•°è¿”å›ç±»å‹ï¼Œå¹¶ä¸ä¼šè¿”å›å€¼ã€‚

3. int

å¦ä¸€ç§æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªæ•´å‹æ•°å­—ã€‚ Dart ä¸­ä¸€äº›å…¶ä»–çš„å†…ç½®ç±»å‹åŒ…æ‹¬ Stringã€List å’Œ boolã€‚

4. print()

ä¸€ç§ä¾¿åˆ©çš„å°†ä¿¡æ¯è¾“å‡ºæ˜¾ç¤ºçš„æ–¹å¼ã€‚

5. '...' (æˆ– "...")

è¡¨ç¤ºå­—ç¬¦ä¸²å­—é¢é‡ã€‚

6. $variableName (æˆ– ${expression})

è¡¨ç¤ºå­—ç¬¦ä¸²æ’å€¼ï¼šå­—ç¬¦ä¸²å­—é¢é‡ä¸­åŒ…å«çš„å˜é‡æˆ–è¡¨è¾¾å¼ã€‚

7. main()

ä¸€ä¸ªç‰¹æ®Šä¸” å¿…é¡»çš„ é¡¶çº§å‡½æ•°ï¼ŒDart åº”ç”¨ç¨‹åºæ€»æ˜¯ä¼šä»è¯¥å‡½æ•°å¼€å§‹æ‰§è¡Œã€‚æŸ¥é˜… main() å‡½æ•° è·å–æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚

8. var

ç”¨äºå®šä¹‰å˜é‡ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å®šä¹‰å˜é‡ä¸éœ€è¦æŒ‡å®šå˜é‡ç±»å‹ã€‚è¿™ç±»å˜é‡çš„ç±»å‹ (int) ç”±å®ƒçš„åˆå§‹å€¼å†³å®š (42)ã€‚

## Darté‡è¦æ¦‚å¿µ

* æ‰€æœ‰å˜é‡å¼•ç”¨çš„éƒ½æ˜¯**å¯¹è±¡**,æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ª**ç±»**çš„å®ä¾‹ã€‚æ•°å­—ã€å‡½æ•°ä»¥åŠnulléƒ½æ˜¯å¯¹è±¡ã€‚é™¤å»nullä»¥å¤–ï¼ˆå¦‚æœä½ å¼€å¯äº†ç©ºå®‰å…¨ï¼‰ï¼Œæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿äºObjectç±»ã€‚

* å°½ç®¡Dartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œä½†æ˜¯å†å£°æ˜å˜é‡æ—¶æŒ‡å®šç±»å‹æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºDartå¯ä»¥è¿›è¡Œå¼ºç±»å‹æ¨æ–­ã€‚åœ¨ä¸Šè¯‰ä»£ç ä¸­ï¼Œå˜é‡`number`çš„ç±»å‹è¢«æ¨æ–­ä¸º`int`ç±»å‹ã€‚

* å¦‚æœä½ å¼€å¯äº†ç©ºå®‰å…¨ï¼Œå˜é‡åœ¨æœªå£°æ˜ä¸ºå¯ç©ºç±»å‹æ—¶ä¸èƒ½ä¸º`null`ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç±»å‹ååŠ ä¸Šé—®å·ï¼ˆ ? ï¼‰**å°†ç±»å‹å£°æ˜ä¸ºå¯ç©º**ã€‚ä¾‹å¦‚ï¼Œ`int?`ç±»å‹çš„å˜é‡å¯ä»¥æ˜¯æ•´å½¢æ•°å­—æˆ–nullã€‚å¦‚æœä½ æ˜ç¡®çŸ¥é“ä¸€ä¸ªè¡¨è¾¾å¼ä¸ä¼šä¸ºç©ºï¼Œä½†Dartä¸è¿™ä¹ˆè®¤ä¸ºæ—¶ï¼Œ**ä½ å¯ä»¥åœ¨è¡¨è¾¾å¼åæ·»åŠ æ„Ÿå¹å·ï¼ˆ!ï¼‰æ¥æ–­è¨€è¡¨è¾¾å¼ä¸ä¸ºç©ºï¼ˆä¸ºç©ºæ—¶å°†æŠ›å‡ºå¼‚å¸¸ï¼‰**ã€‚ä¾‹å¦‚ï¼š`int x = nullableButNotNullInt!`

* å¦‚æœä½ æƒ³è¦æ˜¾å¼åœ°å£°æ˜å…è®¸ä»»æ„ç±»å‹ï¼Œä½¿ç”¨Object?ï¼ˆå¦‚æœä½ å¼€å¯äº†ç©ºå®‰å…¨ï¼‰ã€Objectæˆ–è€…ç‰¹æ®Šç±»å‹dynamicå°†æ£€æŸ¥å»¶è¿Ÿåˆ°è¿è¡Œæ—¶è¿›è¡Œã€‚

* Dartæ”¯æŒæ³›å‹ï¼Œæ¯”å¦‚`List<int>`ï¼ˆè¡¨ç¤ºä¸€ç»„ç”±intå¯¹è±¡ç»„æˆçš„åˆ—è¡¨ï¼‰æˆ–`List<Object>`ï¼ˆè¡¨ç¤ºä¸€ç»„ç”±ä»»ä½•ç±»å‹å¯¹è±¡ç»„æˆçš„åˆ—è¡¨ï¼‰ã€‚

* Dartæ”¯æŒé¡¶çº§å‡½æ•°ï¼ˆä¾‹å¦‚`main`æ–¹æ³•ï¼‰ï¼ŒåŒæ—¶è¿˜æ”¯æŒå®šä¹‰å±äºç±»æˆ–å¯¹è±¡çš„å‡½æ•°ï¼ˆå³é™æ€å’Œå®ä¾‹æ–¹æ³•ï¼‰ã€‚ä½ è¿˜å¯ä»¥åœ¨å‡½æ•°ä¸­å®šä¹‰å‡½æ•°ï¼ˆåµŒå¥—æˆ–å±€éƒ¨å‡½æ•°ï¼‰ã€‚

* Dartæ²¡æœ‰ç±»ä¼¼Javaé‚£æ ·çš„publicã€protectedå’Œprivateæˆå‘˜è®¿é—®é™å®šç¬¦ã€‚å¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´åˆ™è¡¨ç¤ºè¯¥æ ‡è¯†ç¬¦åœ¨åº“å†…æ˜¯ç§æœ‰çš„ã€‚

* æ ‡è¯†ç¬¦å¯ä»¥ä»¥å­—æ¯æˆ–åˆ™ä¸‹åˆ’çº¿(_)å¼€å¤´ï¼Œå…¶åå¯è·Ÿå­—ç¬¦å’Œæ•°å­—çš„ç»„åˆã€‚

* Dartå·¥å…·å¯ä»¥æ˜¾ç¤º**è­¦å‘Š**å’Œ**é”™è¯¯**ä¸¤ç§ç±»å‹çš„é—®é¢˜ã€‚è­¦å‘Šè¡¨æ˜ä»£ç å¯èƒ½æœ‰é—®é¢˜ä½†ä¸ä¼šé˜»æ­¢å…¶è¿è¡Œã€‚é”™è¯¯åˆ†ä¸ºç¼–è¯‘æ—¶é”™è¯¯å’Œè¿è¡Œæ—¶é”™è¯¯ï¼›ç¼–è¯‘æ—¶é”™è¯¯ä»£ç æ— æ³•è¿è¡Œï¼›è¿è¡Œæ—¶é”™è¯¯ä¼šåœ¨ä»£ç è¿è¡Œæ—¶å¯¼è‡´å¼‚å¸¸ã€‚

## å…³é”®å­—

|  abstract[^2] |      else      |   import[^2]  |   show[^1]  |
|:-------------:|:--------------:|:-------------:|:-----------:|
|     as[^2]    |      enum      |       in      |  static[^2] |
|     assert    |   export[^2]   | interface[^2] |    super    |
|   async[^1]   |     extends    |       is      |    switch   |
|   await[^3]   |  extension[^2] |    late[^2]   |   sync[^1]  |
|     break     |  external[^2]  |  library[^2]  |     this    |
|      case     |   factory[^2]  |   mixin[^2]   |    throw    |
|     catch     |      false     |      new      |     true    |
|     class     |      final     |      null     |     try     |
|     const     |     finally    |     on[^1]    | typedef[^2] |
|    continue   |       for      |  operator[^2] |     var     |
| covariant[^2] |  Function[^2]  |    part[^2]   |     void    |
|    default    |     get[^2]    |  required[^2] |    while    |
|  deferred[^2] |    hide[^1]    |    rethrow    |     with    |
|       do      |       if       |     return    |  yield[^3]  |
|  dynamic[^2]  | implements[^2] |    set[^2]    |             |

[^1]:å¸¦æœ‰ä¸Šæ ‡1çš„å…³é”®å­—ä¸º**ä¸Šä¸‹æ–‡å…³é”®å­—**ï¼Œåªæœ‰åœ¨ç‰¹å®šçš„åœºæ™¯æ‰æœ‰æ„ä¹‰ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½œä¸ºæœ‰æ•ˆçš„æ ‡è¯†ç¬¦ã€‚

[^2]:å¸¦æœ‰ä¸Šæ ‡2çš„å…³é”®å­—ä¸º**å†…ç½®æ ‡è¯†ç¬¦**ï¼Œè¿™äº›å…³é”®å­—åœ¨å¤§å¤šæ•°æ—¶å€™éƒ½å¯ä»¥ä½œä¸ºæœ‰æ•ˆçš„æ ‡è¯†ç¬¦ï¼Œä½†æ˜¯å®ƒä»¬ä¸èƒ½ç”¨ä½œç±»åæˆ–è€…ç±»å‹åæˆ–åˆ™å¯¼å…¥å‰ç¼€ä½¿ç”¨ã€‚

[^3]:å¸¦æœ‰ä¸Šæ ‡3çš„å…³é”®å­—ä¸ºDart 1.0å‘å¸ƒåç”¨äºæ”¯æŒå¼‚æ­¥çš„ç›¸å…³å†…å®¹ã€‚ä¸èƒ½åœ¨ç”±å…³é”®å­—`async`ã€`async*`æˆ–`sync`æ ‡è¯†çš„æ–¹æ³•ä½“ä¸­ä½¿ç”¨`await`æˆ–`yield`ä½œä¸ºæ ‡è¯†ç¬¦ã€‚

å…¶å®ƒæ²¡æœ‰ä¸Šæ ‡çš„å…³é”®å­—ä¸º**ä¿ç•™å­—**ï¼Œå‡ä¸èƒ½ç”¨ä½œæ ‡è¯†ç¬¦ã€‚

## å˜é‡

ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å°†åˆ›å»ºä¸€ä¸ªå˜é‡å¹¶å°†å…¶åˆå§‹åŒ–ï¼š

```dart
var name = 'Bob';
```

å˜é‡ä»…å­˜å‚¨å¯¹è±¡çš„å¼•ç”¨ã€‚è¿™é‡Œåä¸º name çš„å˜é‡å­˜å‚¨äº†ä¸€ä¸ª String ç±»å‹å¯¹è±¡çš„å¼•ç”¨ï¼Œâ€œBobâ€ åˆ™æ˜¯è¯¥å¯¹è±¡çš„å€¼ã€‚

name å˜é‡çš„ç±»å‹è¢«æ¨æ–­ä¸º Stringï¼Œä½†æ˜¯ä½ å¯ä»¥ä¸ºå…¶æŒ‡å®šç±»å‹ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¸å±€é™äºå•ä¸€çš„ç±»å‹ï¼Œå¯ä»¥å°†å…¶æŒ‡å®šä¸º Objectï¼ˆæˆ– dynamicï¼‰ç±»å‹ã€‚

```dart
Object name = 'Bob';
```

é™¤æ­¤ä¹‹å¤–ä½ ä¹Ÿå¯ä»¥æŒ‡å®šç±»å‹ï¼š

```dart
String name = 'Bob';
```

PS:
æœ¬æ–‡éµå¾ª é£æ ¼å»ºè®®æŒ‡å— ä¸­çš„å»ºè®®ï¼Œé€šè¿‡ var å£°æ˜å±€éƒ¨å˜é‡è€Œéä½¿ç”¨æŒ‡å®šçš„ç±»å‹ã€‚

## é»˜è®¤å€¼

åœ¨ Dart ä¸­ï¼Œæœªåˆå§‹åŒ–ä»¥åŠå¯ç©ºç±»å‹çš„å˜é‡æ‹¥æœ‰ä¸€ä¸ªé»˜è®¤çš„åˆå§‹å€¼ nullã€‚ï¼ˆå¦‚æœä½ æœªè¿ç§»è‡³ ç©ºå®‰å…¨ï¼Œæ‰€æœ‰å˜é‡éƒ½ä¸ºå¯ç©ºç±»å‹ã€‚ï¼‰å³ä¾¿æ•°å­—ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºåœ¨ Dart ä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡ï¼Œæ•°å­—ä¹Ÿä¸ä¾‹å¤–ã€‚

```dart
int? lineCount;
assert(lineCount == null);
```

Ps:
assert() çš„è°ƒç”¨å°†ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ä¸­è¢«å¿½ç•¥æ‰ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œassert(condition) å°†ä¼šåœ¨ æ¡ä»¶åˆ¤æ–­ ä¸º false æ—¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚

**è‹¥ä½ å¯ç”¨äº†ç©ºå®‰å…¨ï¼Œä½ å¿…é¡»åœ¨ä½¿ç”¨å˜é‡å‰åˆå§‹åŒ–å®ƒçš„å€¼ã€‚**

```dart
int lineCount = 0;
```

ä½ å¹¶ä¸éœ€è¦åœ¨å£°æ˜å˜é‡æ—¶åˆå§‹åŒ–ï¼Œåªéœ€åœ¨ç¬¬ä¸€æ¬¡ç”¨åˆ°è¿™ä¸ªå˜é‡å‰åˆå§‹åŒ–å³å¯ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸º Dart å¯ä»¥åœ¨ lineCount è¢«ä¼ é€’åˆ° print() æ—¶æ£€æµ‹å®ƒæ˜¯å¦ä¸ºç©º:

```dart
int lineCount;

if (weLikeToCount) {
  lineCount = countLines();
} else {
  lineCount = 0;
}

print(lineCount);
```

PS:
é¡¶çº§å˜é‡ä»¥åŠç±»å˜é‡æ˜¯å»¶è¿Ÿåˆå§‹åŒ–çš„ï¼Œå³æ£€æŸ¥å˜é‡çš„åˆå§‹åŒ–ä¼šåœ¨å®ƒç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨çš„æ—¶å€™å®Œæˆã€‚

## å»¶è¿Ÿåˆå§‹åŒ–å˜é‡

Dart 2.12 æ–°å¢äº† late ä¿®é¥°ç¬¦ï¼Œè¿™ä¸ªä¿®é¥°ç¬¦å¯ä»¥åœ¨ä»¥ä¸‹æƒ…å†µä¸­ä½¿ç”¨ï¼š

* å£°æ˜ä¸€ä¸ªéç©ºå˜é‡ï¼Œä½†ä¸åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ã€‚
* å»¶è¿Ÿåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ã€‚

é€šå¸¸ Dart çš„è¯­ä¹‰åˆ†æä¼šåœ¨ä¸€ä¸ªå·²å£°æ˜ä¸ºéç©ºçš„å˜é‡è¢«ä½¿ç”¨å‰æ£€æŸ¥å®ƒæ˜¯å¦å·²ç»è¢«èµ‹å€¼ï¼Œä½†æœ‰æ—¶è¿™ä¸ªåˆ†æä¼šå¤±è´¥ã€‚ä¾‹å¦‚ï¼šåœ¨æ£€æŸ¥é¡¶çº§å˜é‡å’Œå®ä¾‹å˜é‡æ—¶ï¼Œåˆ†æé€šå¸¸æ— æ³•åˆ¤æ–­å®ƒä»¬æ˜¯å¦å·²ç»è¢«åˆå§‹åŒ–ï¼Œå› æ­¤ä¸ä¼šè¿›è¡Œåˆ†æã€‚

å¦‚æœä½ ç¡®å®šè¿™ä¸ªå˜é‡åœ¨ä½¿ç”¨å‰å°±å·²ç»è¢«å£°æ˜ï¼Œä½† Dart åˆ¤æ–­å¤±è¯¯çš„è¯ï¼Œä½ å¯ä»¥åœ¨å£°æ˜å˜é‡çš„æ—¶å€™ä½¿ç”¨ late ä¿®é¥°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

```dart
late String description;

void main() {
  description = 'Feijoada!';
  print(description);
}
```

PS
è‹¥ late æ ‡è®°çš„å˜é‡åœ¨ä½¿ç”¨å‰æ²¡æœ‰åˆå§‹åŒ–ï¼Œåœ¨å˜é‡è¢«ä½¿ç”¨æ—¶ä¼šæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚

å¦‚æœä¸€ä¸ª late ä¿®é¥°çš„å˜é‡åœ¨å£°æ˜æ—¶å°±æŒ‡å®šäº†åˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå®é™…çš„åˆå§‹åŒ–è¿‡ç¨‹ä¼šå‘ç”Ÿåœ¨ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨çš„æ—¶å€™ã€‚è¿™æ ·çš„å»¶è¿Ÿåˆå§‹åŒ–åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä¼šå¸¦æ¥ä¾¿åˆ©ï¼š

* Dart è®¤ä¸ºè¿™ä¸ªå˜é‡å¯èƒ½åœ¨åæ–‡ä¸­æ²¡è¢«ä½¿ç”¨ï¼Œè€Œä¸”åˆå§‹åŒ–æ—¶å°†äº§ç”Ÿè¾ƒå¤§çš„ä»£ä»·ã€‚

* ä½ æ­£åœ¨åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå®ƒçš„åˆå§‹åŒ–æ–¹æ³•éœ€è¦è°ƒç”¨ thisã€‚

åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ temperature å˜é‡ä»æœªè¢«ä½¿ç”¨çš„è¯ï¼Œé‚£ä¹ˆ readThermometer() å°†æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ï¼š

```dart
// This is the program's only call to readThermometer().
late String temperature = readThermometer(); // Lazily initialized.
```

## Final å’Œ Const

å¦‚æœä½ ä¸æƒ³æ›´æ”¹ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— final æˆ–è€… const ä¿®é¥°å˜é‡ï¼Œè¿™ä¸¤ä¸ªå…³é”®å­—å¯ä»¥æ›¿ä»£ var å…³é”®å­—æˆ–è€…åŠ åœ¨ä¸€ä¸ªå…·ä½“çš„ç±»å‹å‰ã€‚ä¸€ä¸ª final å˜é‡åªå¯ä»¥è¢«èµ‹å€¼ä¸€æ¬¡ï¼›ä¸€ä¸ª const å˜é‡æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡ (const å˜é‡åŒæ—¶ä¹Ÿæ˜¯ final çš„)ã€‚

::: tip
å®ä¾‹å˜é‡ å¯ä»¥æ˜¯ final çš„ä½†ä¸å¯ä»¥æ˜¯ constï¼Œ
å®ä¾‹å˜é‡ï¼šå®šä¹‰åœ¨ç±»ä¸­ä½†åœ¨ä»»ä½•æ–¹æ³•ä¹‹å¤–ã€‚
:::

ä¸‹é¢çš„ç¤ºä¾‹ä¸­æˆ‘ä»¬åˆ›å»ºå¹¶è®¾ç½®ä¸¤ä¸ª final å˜é‡ï¼š

```dart
final name = 'Bob'; // Without a type annotation
final String nickname = 'Bobby';
```

ä½ ä¸èƒ½ä¿®æ”¹ä¸€ä¸ª final å˜é‡çš„å€¼ï¼š

```dart
//é”™è¯¯
name = 'Alice'; // Error: a final variable can only be set once.
```

ä½¿ç”¨å…³é”®å­— const ä¿®é¥°å˜é‡è¡¨ç¤ºè¯¥å˜é‡ä¸º ç¼–è¯‘æ—¶å¸¸é‡ã€‚**å¦‚æœä½¿ç”¨ const ä¿®é¥°ç±»ä¸­çš„å˜é‡ï¼Œåˆ™å¿…é¡»åŠ ä¸Š static å…³é”®å­—**ï¼Œå³ static constï¼ˆè¯‘è€…æ³¨ï¼šé¡ºåºä¸èƒ½é¢ å€’ï¼‰ã€‚åœ¨å£°æ˜ const å˜é‡æ—¶å¯ä»¥ç›´æ¥ä¸ºå…¶èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒçš„ const å˜é‡ä¸ºå…¶èµ‹å€¼ï¼š

```dart
const bar = 1000000; // Unit of pressure (dynes/cm2)
const double atm = 1.01325 * bar; // Standard atmosphere
```

const å…³é”®å­—ä¸ä»…ä»…å¯ä»¥ç”¨æ¥å®šä¹‰å¸¸é‡ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ›å»º å¸¸é‡å€¼ï¼Œè¯¥å¸¸é‡å€¼å¯ä»¥èµ‹äºˆç»™ä»»ä½•å˜é‡ã€‚ä½ ä¹Ÿå¯ä»¥å°†æ„é€ å‡½æ•°å£°æ˜ä¸º const çš„ï¼Œè¿™ç§ç±»å‹çš„æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸å¯æ”¹å˜çš„ã€‚

```dart
var foo = const [];
final bar = const [];
const baz = []; // Equivalent to `const []`
```

å¦‚æœä½¿ç”¨åˆå§‹åŒ–è¡¨è¾¾å¼ä¸ºå¸¸é‡èµ‹å€¼å¯ä»¥çœç•¥æ‰å…³é”®å­— constï¼Œæ¯”å¦‚ä¸Šé¢çš„å¸¸é‡ baz çš„èµ‹å€¼å°±çœç•¥æ‰äº† constã€‚

**æ²¡æœ‰ä½¿ç”¨ final æˆ– const ä¿®é¥°çš„å˜é‡çš„å€¼æ˜¯å¯ä»¥è¢«æ›´æ”¹çš„ï¼Œå³ä½¿è¿™äº›å˜é‡ä¹‹å‰å¼•ç”¨è¿‡ const çš„å€¼ã€‚**

```dart
foo = [1, 2, 3]; // Was const []
```

å¸¸é‡çš„å€¼ä¸å¯ä»¥è¢«ä¿®æ”¹ï¼š

```dart 
//æŠ¥é”™
baz = [42]; // Error: Constant variables can't be assigned a value.
```

ä½ å¯ä»¥åœ¨å¸¸é‡ä¸­ä½¿ç”¨ [ç±»å‹æ£€æŸ¥å’Œå¼ºåˆ¶ç±»å‹è½¬æ¢]() (is å’Œ as)ã€ [é›†åˆä¸­çš„ if]() ä»¥åŠ [å±•å¼€æ“ä½œç¬¦]() (... å’Œ ...?)ï¼š

```dart
const Object i = 3; // Where i is a const Object with an int value...
const list = [i as int]; // Use a typecast.
const map = {if (i is int) i: 'int'}; // Use is and collection if.
const set = {if (list is List<int>) ...list}; // ...and a spread.
```

## å†…ç½®ç±»å‹

Dartè¯­è¨€æ”¯æŒä¸‹åˆ—å†…å®¹ï¼š

* Numbers(int,doublie)
* String(String)
* Booleans(bool)
* Lists(ä¹Ÿè¢«ç§°ä¸ºarrays)
* Sets(Set)
* Maps(Map)
* Runes(å¸¸ç”¨äºåœ¨Characters APIä¸­è¿›è¡Œå­—ç¬¦æ›¿æ¢) 
* Symbols(Symbol)
* The value null(Null)

ä½¿ç”¨å­—é¢é‡æ¥åˆ›å»ºå¯¹è±¡ä¹Ÿå—åˆ°æ”¯æŒã€‚ä¾‹å¦‚ 'This is a string' æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ï¼Œtrue æ˜¯ä¸€ä¸ªå¸ƒå°”å­—é¢é‡ã€‚

ç”±äº Dart ä¸­æ¯ä¸ªå˜é‡å¼•ç”¨éƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸€ä¸ª ç±» çš„å®ä¾‹ï¼‰ï¼Œé€šå¸¸ä¹Ÿå¯ä»¥ä½¿ç”¨ æ„é€ å™¨ æ¥åˆå§‹åŒ–å˜é‡ã€‚ä¸€äº›å†…ç½®çš„ç±»å‹æœ‰å®ƒä»¬è‡ªå·±çš„æ„é€ å™¨ã€‚ä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨ Map() æ¥åˆ›å»ºä¸€ä¸ª map å¯¹è±¡ã€‚

## Numbers

Dartæ”¯æŒä¸¤ç§Numberç±»å‹ï¼š

* int

æ•´æ•°å€¼ï¼›é•¿åº¦ä¸è¶…è¿‡ 64 ä½ï¼Œå…·ä½“å–å€¼èŒƒå›´ ä¾èµ–äºä¸åŒçš„å¹³å°ã€‚åœ¨ DartVM ä¸Šå…¶å–å€¼ä½äº -263 è‡³ 263 - 1 ä¹‹é—´ã€‚åœ¨ Web ä¸Šï¼Œæ•´å‹æ•°å€¼ä»£è¡¨ç€ JavaScript çš„æ•°å­—ï¼ˆ64 ä½æ— å°æ•°æµ®ç‚¹å‹ï¼‰ï¼Œå…¶å…è®¸çš„å–å€¼èŒƒå›´åœ¨ -253 è‡³ 253 - 1 ä¹‹é—´ã€‚

* double

64 ä½çš„åŒç²¾åº¦æµ®ç‚¹æ•°å­—ï¼Œä¸”ç¬¦åˆ IEEE 754 æ ‡å‡†ã€‚

int å’Œ double éƒ½æ˜¯ num çš„å­ç±»ã€‚ [num](https://api.dart.cn/stable/2.19.1/dart-core/num-class.html) ä¸­å®šä¹‰äº†ä¸€äº›åŸºæœ¬çš„è¿ç®—ç¬¦æ¯”å¦‚ +ã€-ã€*ã€/ ç­‰ï¼Œè¿˜å®šä¹‰äº† abs()ã€ceil() å’Œ floor() ç­‰æ–¹æ³•ï¼ˆä½è¿ç®—ç¬¦ï¼Œæ¯”å¦‚ >> å®šä¹‰åœ¨ int ä¸­ï¼‰ã€‚å¦‚æœ num åŠå…¶å­ç±»ä¸æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œå¯ä»¥æŸ¥çœ‹ [dart:math](https://api.dart.cn/stable/2.19.1/dart-math/dart-math-library.html) åº“ä¸­çš„ APIã€‚

æ•´æ•°æ˜¯ä¸å¸¦å°æ•°ç‚¹çš„æ•°å­—ï¼Œä¸‹é¢æ˜¯ä¸€äº›å®šä¹‰æ•´æ•°å­—é¢é‡çš„ä¾‹å­ï¼š

```dart
var x = 1;
var hex = 0xDEADBEEF;
```

å¦‚æœä¸€ä¸ªæ•°å­—åŒ…å«äº†å°æ•°ç‚¹ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æµ®ç‚¹å‹çš„ã€‚ä¸‹é¢æ˜¯ä¸€äº›å®šä¹‰æµ®ç‚¹æ•°å­—é¢é‡çš„ä¾‹å­ï¼š

```dart
var y = 1.1;
var exponents = 1.42e5;
```

æ‚¨è¿˜å¯ä»¥å°†å˜é‡å£°æ˜ä¸º numã€‚å¦‚æœè¿™æ ·åšï¼Œå˜é‡ å¯ä»¥åŒæ—¶å…·æœ‰æ•´æ•°å€¼å’ŒåŒç²¾åº¦å€¼ã€‚

```dart
num x = 1; // x can have both int and double values
x += 2.5;
```

æ•´å‹å­—é¢é‡å°†ä¼šåœ¨å¿…è¦çš„æ—¶å€™è‡ªåŠ¨è½¬æ¢æˆæµ®ç‚¹æ•°å­—é¢é‡ï¼š

```dart
double z = 1; // Equivalent to double z = 1.0.
```

ä¸‹é¢æ˜¯å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´è½¬æ¢çš„æ–¹å¼ï¼š

```dart
// String -> int
var one = int.parse('1');
assert(one == 1);

// String -> double
var onePointOne = double.parse('1.1');
assert(onePointOne == 1.1);

// int -> String
String oneAsString = 1.toString();
assert(oneAsString == '1');

// double -> String
String piAsString = 3.14159.toStringAsFixed(2);
assert(piAsString == '3.14');
```

æ•´å‹æ”¯æŒä¼ ç»Ÿçš„ä½ç§»æ“ä½œï¼Œæ¯”å¦‚ç§»ä½ï¼ˆ<<ã€>> å’Œ >>>ï¼‰ã€è¡¥ç  (~)ã€æŒ‰ä½ä¸ (&)ã€æŒ‰ä½æˆ– (|) ä»¥åŠæŒ‰ä½å¼‚æˆ– (^)ï¼Œä¾‹å¦‚ï¼š

```dart
assert((3 << 1) == 6); // 0011 << 1 == 0110
assert((3 | 4) == 7); // 0011 | 0100 == 0111
assert((3 & 4) == 0); // 0011 & 0100 == 0000
```

## String

Dart å­—ç¬¦ä¸²ï¼ˆString å¯¹è±¡ï¼‰åŒ…å«äº† UTF-16 ç¼–ç çš„å­—ç¬¦åºåˆ—ã€‚å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼š

```dart
var s1 = 'ä½¿ç”¨å•å¼•å·åˆ›å»ºå­—ç¬¦ä¸²å­—é¢é‡ã€‚';
var s2 = "åŒå¼•å·ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºå­—ç¬¦ä¸²å­—é¢é‡ã€‚";
var s3 = 'ä½¿ç”¨å•å¼•å·åˆ›å»ºå­—ç¬¦ä¸²æ—¶å¯ä»¥ä½¿ç”¨æ–œæ æ¥è½¬ä¹‰é‚£äº›ä¸å•å¼•å·å†²çªçš„å­—ç¬¦ä¸²ï¼š\'ã€‚';
var s4 = "è€Œåœ¨åŒå¼•å·ä¸­åˆ™ä¸éœ€è¦ä½¿ç”¨è½¬ä¹‰ä¸å•å¼•å·å†²çªçš„å­—ç¬¦ä¸²ï¼š'";
```

åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œè¯·ä»¥ ${è¡¨è¾¾å¼} çš„å½¢å¼ä½¿ç”¨è¡¨è¾¾å¼ï¼Œå¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¯ä»¥çœç•¥æ‰ {}ã€‚å¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ Dart ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„ toString æ–¹æ³•æ¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

```dart
var s = 'å­—ç¬¦ä¸²æ’å€¼';

assert('Dart æœ‰$sï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚' == 'Dart æœ‰å­—ç¬¦ä¸²æ’å€¼ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚');
assert('ä½¿ç”¨${s.substring(3,5)}è¡¨è¾¾å¼ä¹Ÿéå¸¸æ–¹ä¾¿' == 'ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚');
```

ä½ å¯ä»¥ä½¿ç”¨ + è¿ç®—ç¬¦æˆ–å¹¶åˆ—æ”¾ç½®å¤šä¸ªå­—ç¬¦ä¸²æ¥è¿æ¥å­—ç¬¦ä¸²ï¼š

```dart
var s1 = 'å¯ä»¥æ‹¼æ¥'
    'å­—ç¬¦ä¸²'
    "å³ä¾¿å®ƒä»¬ä¸åœ¨åŒä¸€è¡Œã€‚";
assert(s1 == 'å¯ä»¥æ‹¼æ¥å­—ç¬¦ä¸²å³ä¾¿å®ƒä»¬ä¸åœ¨åŒä¸€è¡Œã€‚');

var s2 = 'ä½¿ç”¨åŠ å· + è¿ç®—ç¬¦' + 'ä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚';
assert(s2 == 'ä½¿ç”¨åŠ å· + è¿ç®—ç¬¦ä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚');
```

ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·æˆ–è€…ä¸‰ä¸ªåŒå¼•å·ä¹Ÿèƒ½åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ï¼š

```dart
var s1 = '''
ä½ å¯ä»¥åƒè¿™æ ·åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ã€‚
''';

var s2 = """è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¤šè¡Œå­—ç¬¦ä¸²ã€‚""";
```

åœ¨å­—ç¬¦ä¸²å‰åŠ ä¸Š r ä½œä¸ºå‰ç¼€åˆ›å»º â€œrawâ€ å­—ç¬¦ä¸²ï¼ˆå³ä¸ä¼šè¢«åšä»»ä½•å¤„ç†ï¼ˆæ¯”å¦‚è½¬ä¹‰ï¼‰çš„å­—ç¬¦ä¸²ï¼‰ï¼š

```dart
var s = r'åœ¨ raw å­—ç¬¦ä¸²ä¸­ï¼Œè½¬ä¹‰å­—ç¬¦ä¸² \n ä¼šç›´æ¥è¾“å‡º â€œ\nâ€ è€Œä¸æ˜¯è½¬ä¹‰ä¸ºæ¢è¡Œã€‚';
```

# å¸ƒå°”ç±»å‹

Dart ä½¿ç”¨ bool å…³é”®å­—è¡¨ç¤ºå¸ƒå°”ç±»å‹ï¼Œå¸ƒå°”ç±»å‹åªæœ‰ä¸¤ä¸ªå¯¹è±¡ true å’Œ falseï¼Œä¸¤è€…éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚

Dart çš„ç±»å‹å®‰å…¨ä¸å…è®¸ä½ ä½¿ç”¨ç±»ä¼¼ if (nonbooleanValue) æˆ–è€… assert (nonbooleanValue) è¿™æ ·çš„ä»£ç æ£€æŸ¥å¸ƒå°”å€¼ã€‚ç›¸åï¼Œä½ åº”è¯¥æ€»æ˜¯æ˜¾ç¤ºåœ°æ£€æŸ¥å¸ƒå°”å€¼ï¼Œæ¯”å¦‚åƒä¸‹é¢çš„ä»£ç è¿™æ ·ï¼š

```dart
// Check for an empty string.
var fullName = '';
assert(fullName.isEmpty);

// Check for zero.
var hitPoints = 0;
assert(hitPoints <= 0);

// Check for null.
var unicorn;
assert(unicorn == null);

// Check for NaN.
var iMeantToDoThis = 0 / 0;
assert(iMeantToDoThis.isNaN);
```

## Lists

æ•°ç»„ (Array) æ˜¯å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­æœ€å¸¸è§çš„é›†åˆç±»å‹ï¼Œåœ¨ Dart ä¸­æ•°ç»„ç”± List å¯¹è±¡è¡¨ç¤ºã€‚é€šå¸¸ç§°ä¹‹ä¸º Listã€‚

Dart ä¸­çš„åˆ—è¡¨å­—é¢é‡æ˜¯ç”±é€—å·åˆ†éš”çš„ä¸€ä¸²è¡¨è¾¾å¼æˆ–å€¼å¹¶ä»¥æ–¹æ‹¬å· ([]) åŒ…è£¹è€Œç»„æˆçš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª Dart List çš„ç¤ºä¾‹ï¼š

```dart
var list = [1, 2, 3];
```

:::tip
è¿™é‡Œ Dart æ¨æ–­å‡º list çš„ç±»å‹ä¸º `List<int>`ï¼Œå¦‚æœå¾€è¯¥æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªé int ç±»å‹çš„å¯¹è±¡åˆ™ä¼šæŠ¥é”™
:::

List çš„ä¸‹æ ‡ç´¢å¼•ä» 0 å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ä¸º 0ï¼Œæœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ä¸º list.length - 1ã€‚ä½ å¯ä»¥åƒ JavaScript ä¸­çš„ç”¨æ³•é‚£æ ·è·å– Dart ä¸­ List çš„é•¿åº¦ä»¥åŠå…ƒç´ ï¼š

```dart
var list = [1, 2, 3];
assert(list.length == 3);
assert(list[1] == 2);

list[1] = 1;
assert(list[1] == 1);
```

åœ¨ List å­—é¢é‡å‰æ·»åŠ  const å…³é”®å­—ä¼šåˆ›å»ºä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡ï¼š

```dart
var constantList = const [1, 2, 3];
// constantList[1] = 1; // This line will cause an error.
```

Dart åœ¨ 2.3 å¼•å…¥äº† **æ‰©å±•æ“ä½œç¬¦ï¼ˆ...ï¼‰**å’Œ **ç©ºæ„ŸçŸ¥æ‰©å±•æ“ä½œç¬¦ï¼ˆ...?ï¼‰**ï¼Œå®ƒä»¬æä¾›äº†ä¸€ç§å°†å¤šä¸ªå…ƒç´ æ’å…¥é›†åˆçš„ç®€æ´æ–¹æ³•ã€‚

ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨æ‰©å±•æ“ä½œç¬¦ï¼ˆ...ï¼‰å°†ä¸€ä¸ª List ä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°å¦ä¸€ä¸ª List ä¸­ï¼š

```dart 
var list = [1, 2, 3];
var list2 = [0, ...list];
assert(list2.length == 4);
```

å¦‚æœæ‰©å±•æ“ä½œç¬¦å³è¾¹å¯èƒ½ä¸º null ï¼Œä½ å¯ä»¥ä½¿ç”¨ null-aware æ‰©å±•æ“ä½œç¬¦ï¼ˆ...?ï¼‰æ¥é¿å…äº§ç”Ÿå¼‚å¸¸ï¼š

```dart
var list2 = [0, ...?list];
assert(list2.length == 1);
```

Dart è¿˜åŒæ—¶å¼•å…¥äº† é›†åˆä¸­çš„ if å’Œ é›†åˆä¸­çš„ for æ“ä½œï¼Œåœ¨æ„å»ºé›†åˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¡ä»¶åˆ¤æ–­ (if) å’Œå¾ªç¯ (for)ã€‚

ä¸‹é¢ç¤ºä¾‹æ˜¯ä½¿ç”¨ é›†åˆä¸­çš„ if æ¥åˆ›å»ºä¸€ä¸ª List çš„ç¤ºä¾‹ï¼Œå®ƒå¯èƒ½åŒ…å« 3 ä¸ªæˆ– 4 ä¸ªå…ƒç´ ï¼š

```dart
var nav = ['Home', 'Furniture', 'Plants', if (promoActive) 'Outlet'];
```

ä¸‹é¢æ˜¯ä½¿ç”¨ é›†åˆä¸­çš„ for å°†åˆ—è¡¨ä¸­çš„å…ƒç´ ä¿®æ”¹åæ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¤ºä¾‹ï¼š

```dart
var listOfInts = [1, 2, 3];
var listOfStrings = ['#0', for (var i in listOfInts) '#$i'];
assert(listOfStrings[1] == '#1');
```

## Sets

åœ¨ Dart ä¸­ï¼Œset æ˜¯ä¸€ç»„ç‰¹å®šå…ƒç´ çš„æ— åºé›†åˆã€‚ Dart æ”¯æŒçš„é›†åˆç”±é›†åˆçš„å­—é¢é‡å’Œ Set ç±»æä¾›ã€‚

ä¸‹é¢æ˜¯ä½¿ç”¨ Set å­—é¢é‡æ¥åˆ›å»ºä¸€ä¸ª Set é›†åˆçš„æ–¹æ³•ï¼š

```dart
var halogens = {'fluorine', 'chlorine', 'bromine', 'iodine', 'astatine'};
```

:::tip
Dart æ¨æ–­ halogens å˜é‡æ˜¯ä¸€ä¸ª `Set<String>` ç±»å‹çš„é›†åˆï¼Œå¦‚æœå¾€è¯¥ Set ä¸­æ·»åŠ ç±»å‹ä¸æ­£ç¡®çš„å¯¹è±¡åˆ™ä¼šæŠ¥é”™ã€‚
:::

å¯ä»¥ä½¿ç”¨åœ¨ {} å‰åŠ ä¸Šç±»å‹å‚æ•°çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªç©ºçš„ Setï¼Œæˆ–è€…å°† {} èµ‹å€¼ç»™ä¸€ä¸ª Set ç±»å‹çš„å˜é‡ï¼š

```dart
var names = <String>{};
// Set<String> names = {}; // This works, too.
// var names = {}; // Creates a map, not a set.
```

:::tip
Set è¿˜æ˜¯ map? Map å­—é¢é‡è¯­æ³•ç›¸ä¼¼äº Set å­—é¢é‡è¯­æ³•ã€‚å› ä¸ºå…ˆæœ‰çš„ Map å­—é¢é‡è¯­æ³•ï¼Œæ‰€ä»¥ {} é»˜è®¤æ˜¯ Map ç±»å‹ã€‚å¦‚æœå¿˜è®°åœ¨ {} ä¸Šæ³¨é‡Šç±»å‹æˆ–èµ‹å€¼åˆ°ä¸€ä¸ªæœªå£°æ˜ç±»å‹çš„å˜é‡ä¸Šï¼Œé‚£ä¹ˆ Dart ä¼šåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º Map<dynamic, dynamic> çš„å¯¹è±¡ã€‚
:::

ä½¿ç”¨ add() æ–¹æ³•æˆ– addAll() æ–¹æ³•å‘å·²å­˜åœ¨çš„ Set ä¸­æ·»åŠ é¡¹ç›®ï¼š

```dart
var elements = <String>{};
elements.add('fluorine');
elements.addAll(halogens);
```

ä½¿ç”¨ .length å¯ä»¥è·å– Set ä¸­å…ƒç´ çš„æ•°é‡ï¼š

```dart
var elements = <String>{};
elements.add('fluorine');
elements.addAll(halogens);
assert(elements.length == 5);
```

å¯ä»¥åœ¨ Set å˜é‡å‰æ·»åŠ  const å…³é”®å­—åˆ›å»ºä¸€ä¸ª Set ç¼–è¯‘æ—¶å¸¸é‡ï¼š

```dart
final constantSet = const {
  'fluorine',
  'chlorine',
  'bromine',
  'iodine',
  'astatine',
};
// constantSet.add('helium'); // This line will cause an error.
```

:::tip
ä» Dart 2.3 å¼€å§‹ï¼ŒSet å¯ä»¥åƒ List ä¸€æ ·æ”¯æŒä½¿ç”¨æ‰©å±•æ“ä½œç¬¦ï¼ˆ... å’Œ ...?ï¼‰ä»¥åŠ Collection if å’Œ for æ“ä½œã€‚
:::

## Maps

é€šå¸¸æ¥è¯´ï¼ŒMap æ˜¯ç”¨æ¥å…³è” keys å’Œ values çš„å¯¹è±¡ã€‚å…¶ä¸­é”®å’Œå€¼éƒ½å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚æ¯ä¸ª é”® åªèƒ½å‡ºç°ä¸€æ¬¡ä½†æ˜¯ å€¼ å¯ä»¥é‡å¤å‡ºç°å¤šæ¬¡ã€‚ Dart ä¸­ Map æä¾›äº† Map å­—é¢é‡ä»¥åŠ Map ç±»å‹ä¸¤ç§å½¢å¼çš„ Mapã€‚

ä¸‹é¢æ˜¯ä¸€å¯¹ä½¿ç”¨ Map å­—é¢é‡åˆ›å»º Map çš„ä¾‹å­ï¼š

```dart
var gifts = {
  // Key:    Value
  'first': 'partridge',
  'second': 'turtledoves',
  'fifth': 'golden rings'
};

var nobleGases = {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};
```

:::tip
Dart å°† gifts å˜é‡çš„ç±»å‹æ¨æ–­ä¸º Map<String, String>ï¼Œè€Œå°† nobleGases çš„ç±»å‹æ¨æ–­ä¸º Map<int, String>ã€‚å¦‚æœä½ å‘è¿™ä¸¤ä¸ª Map å¯¹è±¡ä¸­æ·»åŠ ä¸æ­£ç¡®çš„ç±»å‹å€¼ï¼Œå°†å¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ã€‚
:::

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Map çš„æ„é€ å™¨åˆ›å»º Mapï¼š

```dart
var gifts = Map<String, String>();
gifts['first'] = 'partridge';
gifts['second'] = 'turtledoves';
gifts['fifth'] = 'golden rings';

var nobleGases = Map<int, String>();
nobleGases[2] = 'helium';
nobleGases[10] = 'neon';
nobleGases[18] = 'argon';
```

:::tip
å¦‚æœä½ ä¹‹å‰æ˜¯ä½¿ç”¨çš„ C# æˆ– Java è¿™æ ·çš„è¯­è¨€ï¼Œä¹Ÿè®¸ä½ æƒ³ä½¿ç”¨ `new Map()` æ„é€  Map å¯¹è±¡ã€‚ä½†æ˜¯åœ¨ Dart ä¸­ï¼Œ`new` å…³é”®è¯æ˜¯å¯é€‰çš„ã€‚(è¯‘è€…æ³¨ï¼šä¸”ä¸è¢«å»ºè®®ä½¿ç”¨)ã€‚
:::

å‘ç°æœ‰çš„ Map ä¸­æ·»åŠ é”®å€¼å¯¹ä¸ JavaScript çš„æ“ä½œç±»ä¼¼ï¼š

```dart
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds'; // Add a key-value pair
```

ä»ä¸€ä¸ª Map ä¸­è·å–ä¸€ä¸ªå€¼çš„æ“ä½œä¹Ÿä¸ JavaScript ç±»ä¼¼ï¼š

```dart
var gifts = {'first': 'partridge'};
assert(gifts['first'] == 'partridge');
```

å¦‚æœæ£€ç´¢çš„ Key ä¸å­˜åœ¨äº Map ä¸­åˆ™ä¼šè¿”å›ä¸€ä¸ª nullï¼š

```dart
var gifts = {'first': 'partridge'};
assert(gifts['fifth'] == null);
```

ä½¿ç”¨ .length å¯ä»¥è·å– Map ä¸­é”®å€¼å¯¹çš„æ•°é‡ï¼š

```dart
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds';
assert(gifts.length == 2);
```

åœ¨ä¸€ä¸ª Map å­—é¢é‡å‰æ·»åŠ  const å…³é”®å­—å¯ä»¥åˆ›å»ºä¸€ä¸ª Map ç¼–è¯‘æ—¶å¸¸é‡ï¼š

```dart
final constantMap = const {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};

// constantMap[2] = 'Helium'; // This line will cause an error.
```

:::tip
Map å¯ä»¥åƒ List ä¸€æ ·æ”¯æŒä½¿ç”¨æ‰©å±•æ“ä½œç¬¦ï¼ˆ... å’Œ ...?ï¼‰ä»¥åŠé›†åˆçš„ if å’Œ for æ“ä½œã€‚
:::

## Runes ä¸ grapheme clusters

åœ¨ Dart ä¸­ï¼Œ[runes](https://api.dart.cn/stable/2.19.2/dart-core/Runes-class.html) å…¬å¼€äº†å­—ç¬¦ä¸²çš„ Unicode ç ä½ã€‚ä½¿ç”¨ [characters åŒ…](https://pub.flutter-io.cn/packages/characters) æ¥è®¿é—®æˆ–è€…æ“ä½œç”¨æˆ·æ„ŸçŸ¥çš„å­—ç¬¦ï¼Œä¹Ÿè¢«ç§°ä¸º [Unicode (æ‰©å±•) grapheme clusters](https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries)ã€‚

Unicode ç¼–ç ä¸ºæ¯ä¸€ä¸ªå­—æ¯ã€æ•°å­—å’Œç¬¦å·éƒ½å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ã€‚å› ä¸º Dart ä¸­çš„**å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª UTF-16 çš„å­—ç¬¦åºåˆ—**ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦è¡¨ç¤º 32 ä½çš„ Unicode æ•°å€¼åˆ™éœ€è¦ä¸€ç§**ç‰¹æ®Šçš„è¯­æ³•**ã€‚

è¡¨ç¤º Unicode å­—ç¬¦çš„å¸¸è§æ–¹å¼æ˜¯ä½¿ç”¨ \uXXXXï¼Œå…¶ä¸­ XXXX æ˜¯ä¸€ä¸ªå››ä½æ•°çš„ 16 è¿›åˆ¶æ•°å­—ã€‚ä¾‹å¦‚å¿ƒå½¢å­—ç¬¦ï¼ˆâ™¥ï¼‰çš„ Unicode ä¸º \u2665ã€‚å¯¹äºä¸æ˜¯å››ä½æ•°çš„ 16 è¿›åˆ¶æ•°å­—ï¼Œéœ€è¦ä½¿ç”¨å¤§æ‹¬å·å°†å…¶æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚å¤§ç¬‘çš„ emoji è¡¨æƒ…ï¼ˆğŸ˜†ï¼‰çš„ Unicode ä¸º \u{1f600}ã€‚

å¦‚æœä½ éœ€è¦è¯»å†™å•ä¸ª Unicode å­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ characters åŒ…ä¸­å®šä¹‰çš„ characters getterã€‚å®ƒå°†è¿”å› Characters å¯¹è±¡ä½œä¸ºä¸€ç³»åˆ— grapheme clusters çš„å­—ç¬¦ä¸²ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨ characters API çš„æ ·ä¾‹ï¼š

```dart
import 'package:characters/characters.dart';

void main() {
  var hi = 'Hi ğŸ‡©ğŸ‡°';
  print(hi);
  print(hi.runes);
  print('The end of the string: ${hi.substring(hi.length - 1)}');
  print('The last character: ${hi.characters.last}');
  
  
  // Surrogate pairs:
  for (final item in hi.runes) {
    print(item.toRadixString(16));
  }
}
```

è¾“å‡ºå–å†³äºä½ çš„ç¯å¢ƒï¼Œå¤§è‡´ç±»ä¼¼äºï¼š

```sh
dart run bin/main.dart

Hi ğŸ‡©ğŸ‡°
(72, 105, 32, 127465, 127472)
The end of the string: ï¿½
The last character: ğŸ‡©ğŸ‡°
48
69
20
1f1e9
1f1f0
```

## Symbols

Symbol è¡¨ç¤º Dart ä¸­å£°æ˜çš„æ“ä½œç¬¦æˆ–è€…æ ‡è¯†ç¬¦ã€‚ä½ å‡ ä¹ä¸ä¼šéœ€è¦ Symbolï¼Œä½†æ˜¯å®ƒä»¬å¯¹äºé‚£äº›é€šè¿‡åç§°å¼•ç”¨æ ‡è¯†ç¬¦çš„ API å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºä»£ç å‹ç¼©åï¼Œå°½ç®¡æ ‡è¯†ç¬¦çš„åç§°ä¼šæ”¹å˜ï¼Œä½†æ˜¯å®ƒä»¬çš„ Symbol ä¼šä¿æŒä¸å˜ã€‚

å¯ä»¥ä½¿ç”¨åœ¨æ ‡è¯†ç¬¦å‰åŠ  # å‰ç¼€æ¥è·å– Symbolï¼š

```dart
#radix
#bar
```

Symbol å­—é¢é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚

## å‡½æ•°

Dart æ˜¯ä¸€ç§çœŸæ­£é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€ä»¥å³ä¾¿å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡å¹¶ä¸”ç±»å‹ä¸º Functionï¼Œ**è¿™æ„å‘³ç€å‡½æ•°å¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡æˆ–è€…ä½œä¸ºå…¶å®ƒå‡½æ•°çš„å‚æ•°ã€‚**ä½ ä¹Ÿå¯ä»¥åƒè°ƒç”¨å‡½æ•°ä¸€æ ·è°ƒç”¨ Dart ç±»çš„å®ä¾‹ã€‚

ä¸‹é¢æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š

```dart
bool isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
```

è™½ç„¶é«˜æ•ˆ Dart æŒ‡å—å»ºè®®åœ¨ å…¬å¼€çš„ API ä¸Šå®šä¹‰è¿”å›ç±»å‹ï¼Œä¸è¿‡å³ä¾¿ä¸å®šä¹‰ï¼Œè¯¥å‡½æ•°ä¹Ÿä¾ç„¶æœ‰æ•ˆï¼š

```dart
bool isNoble(atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
```

å¦‚æœå‡½æ•°ä½“å†…åªåŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ç®€å†™è¯­æ³•ï¼š

```
bool isNoble(int atomicNumber) => _nobleGases[atomicNumber] != null;
```

**è¯­æ³• => ***è¡¨è¾¾å¼*** æ˜¯ ***{ return è¡¨è¾¾å¼;}***çš„ç®€å†™ï¼Œ=>æœ‰æ—¶ä¹Ÿç§°ä¸ºç®­å¤´å‡½æ•°**

:::tip
åœ¨=>ä¸;ä¹‹é—´åªèƒ½æ˜¯è¡¨è¾¾å¼è€Œéè¯­å¥ã€‚æ¯”å¦‚ä½ ä¸èƒ½å°†ä¸€ä¸ªifè¯­å¥æ”¾åœ¨å…¶ä¸­ï¼Œä½†æ˜¯å¯ä»¥æ”¾ç½®æ¡ä»¶è¡¨è¾¾å¼ã€‚
:::

## å‚æ•°

å‡½æ•°å¯ä»¥æœ‰ä¸¤ç§å½¢å¼çš„å‚æ•°ï¼š**å¿…è¦å‚æ•°** å’Œ **å¯é€‰å‚æ•°**ã€‚å¿…è¦å‚æ•°å®šä¹‰åœ¨å‚æ•°åˆ—è¡¨å‰é¢ï¼Œå¯é€‰å‚æ•°åˆ™å®šä¹‰åœ¨å¿…è¦å‚æ•°åé¢ã€‚å¯é€‰å‚æ•°å¯ä»¥æ˜¯ **å‘½åçš„** æˆ– **ä½ç½®çš„**ã€‚

:::tip
æŸäº› APIï¼ˆç‰¹åˆ«æ˜¯ Flutter æ§ä»¶çš„æ„é€ å™¨ï¼‰åªä½¿ç”¨å‘½åå‚æ•°ï¼Œå³ä¾¿å‚æ•°æ˜¯å¼ºåˆ¶æ€§çš„ã€‚
:::

å‘å‡½æ•°ä¼ å…¥å‚æ•°æˆ–è€…å®šä¹‰å‡½æ•°å‚æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ å°¾é€—å·ã€‚

* å‘½åå‚æ•°

å‘½åå‚æ•°é»˜è®¤ä¸ºå¯é€‰å‚æ•°ï¼Œé™¤éä»–ä»¬è¢«ç‰¹åˆ«æ ‡è®°ä¸º requiredã€‚

å®šä¹‰å‡½æ•°æ—¶ï¼Œä½¿ç”¨ {å‚æ•°1, å‚æ•°2, â€¦} æ¥æŒ‡å®šå‘½åå‚æ•°ï¼šå¦‚æœä½ æ²¡æœ‰æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨ required æ ‡è®°çš„è¯ï¼Œé‚£ä¹ˆå®ƒä¸€å®šå¯ç©ºçš„ç±»å‹ï¼Œå› ä¸ºä»–ä»¬çš„é»˜è®¤å€¼ä¼šæ˜¯ nullï¼š

```dart
// Sets the [bold] and [hidden] flags ...
void enableFlags({bool? bold, bool? hidden}) {...}
```

å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ å‚æ•°å: å‚æ•°å€¼ æŒ‡å®šä¸€ä¸ªå‘½åå‚æ•°çš„å€¼ã€‚ä¾‹å¦‚ï¼š

```dart
enableFlags(bold: true, hidden: false);
```

ä½ å¯ä»¥ä½¿ç”¨ = æ¥ä¸ºä¸€ä¸ªå‘½åå‚æ•°æŒ‡å®šé™¤äº† null ä»¥å¤–çš„é»˜è®¤å€¼ã€‚æŒ‡å®šçš„é»˜è®¤å€¼å¿…é¡»è¦ä¸ºç¼–è¯‘æ—¶çš„å¸¸é‡ï¼Œä¾‹å¦‚ï¼š

```dart
/// Sets the [bold] and [hidden] flags ...
void enableFlags({bool bold = false, bool hidden = false}) {...}

// bold will be true; hidden will be false.
enableFlags(bold: true);
```

å¦‚æœä½ å¸Œæœ›ä¸€ä¸ªå‘½åå‚æ•°æ˜¯å¼ºåˆ¶éœ€è¦ä½¿ç”¨çš„ï¼Œè°ƒç”¨è€…éœ€è¦æä¾›å®ƒçš„å€¼ï¼Œåˆ™ä½ å¯ä»¥ä½¿ç”¨ required è¿›è¡Œå£°æ˜ï¼š

```dart
const Scrollbar({super.key, required Widget child});
```

å½“ä½ åˆ›å»ºä¸€ä¸ªä¸å¸¦ child å‚æ•°çš„ Scrollbar æ—¶ï¼Œåˆ†æå™¨å°±ä¼šæŠ¥å‘Šè¿™é‡Œå‡ºäº†é—®é¢˜ã€‚

```dart{3}
//ä¸€ä¸ªæ ‡è®°äº† required çš„å‚æ•°ä»ç„¶æ˜¯å¯ç©ºçš„ç±»å‹:(å¯ä»¥ä¸ºç©ºæˆ–å…¶å®ƒå€¼ä¸èƒ½æ²¡æœ‰å€¼)

const Scrollbar({super.key, required Widget? child});
```

å°½ç®¡å°†ä½ç½®å‚æ•°æ”¾åœ¨æœ€å‰é¢é€šå¸¸æ¯”è¾ƒåˆç†ï¼Œä½†ä½ ä¹Ÿå¯ä»¥å°†å‘½åå‚æ•°æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„ä»»æ„ä½ç½®ï¼Œè®©æ•´ä¸ªè°ƒç”¨çš„æ–¹å¼çœ‹èµ·æ¥æ›´é€‚åˆä½ çš„ APIï¼š

```dart
repeat(times: 2, () {
  ...
});
```

* å¯é€‰çš„ä½ç½®å‚æ•°

ä½¿ç”¨ [] å°†ä¸€ç³»åˆ—å‚æ•°åŒ…è£¹èµ·æ¥ï¼Œå³å¯å°†å…¶æ ‡è®°ä¸ºä½ç½®å‚æ•°ï¼Œå› ä¸ºå®ƒä»¬çš„é»˜è®¤å€¼æ˜¯ nullï¼Œæ‰€ä»¥å¦‚æœä½ æ²¡æœ‰æä¾›é»˜è®¤å€¼çš„è¯ï¼Œå®ƒä»¬çš„ç±»å‹å¿…é¡»å¾—æ˜¯å…è®¸ä¸ºç©º (nullable) çš„ç±»å‹ã€‚

```dart
String say(String from, String msg, [String? device]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  return result;
}
```

ä¸‹é¢æ˜¯ä¸ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨ä¸Šè¿°å‡½æ•°çš„ç¤ºä¾‹

```dart
assert(say('Bob', 'Howdy') == 'Bob says Howdy');
```

ä¸‹é¢æ˜¯ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨ä¸Šè¿°å‡½æ•°çš„ç¤ºä¾‹ï¼š

```dart
assert(say('Bob', 'Howdy', 'smoke signal') ==
    'Bob says Howdy with a smoke signal');
```

ä½ å¯ä»¥ä½¿ç”¨ = æ¥ä¸ºä¸€ä¸ªä½ç½®å¯é€‰å‚æ•°æŒ‡å®šé™¤äº† null ä»¥å¤–çš„é»˜è®¤å€¼ã€‚æŒ‡å®šçš„é»˜è®¤å€¼å¿…é¡»è¦ä¸ºç¼–è¯‘æ—¶çš„å¸¸é‡ï¼Œä¾‹å¦‚ï¼š

```dart
String say(String from, String msg, [String device = 'carrier pigeon']) {
  var result = '$from says $msg with a $device';
  return result;
}

assert(say('Bob', 'Howdy') == 'Bob says Howdy with a carrier pigeon');
```

## main()å‡½æ•°

æ¯ä¸ª Dart ç¨‹åºéƒ½å¿…é¡»æœ‰ä¸€ä¸ª `main()` é¡¶çº§å‡½æ•°ä½œä¸ºç¨‹åºçš„å…¥å£ï¼Œ `main()` å‡½æ•°è¿”å›å€¼ä¸º `void` å¹¶ä¸”æœ‰ä¸€ä¸ª `List<String>` ç±»å‹çš„å¯é€‰å‚æ•°ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å• main() å‡½æ•°ï¼š

```dart
void main() {
  print('Hello, World!');
}
```

ä¸‹é¢æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œè®¿é—®å¸¦å‚æ•°çš„ main() å‡½æ•°ç¤ºä¾‹ï¼š

```dart
// Run the app like this: dart args.dart 1 test
void main(List<String> arguments) {
  print(arguments);

  assert(arguments.length == 2);
  assert(int.parse(arguments[0]) == 1);
  assert(arguments[1] == 'test');
}
```

## å‡½æ•°æ˜¯ä¸€çº§å¯¹è±¡

å¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ï¼š

```dart
void printElement(int element) {
  print(element);
}

var list = [1, 2, 3];

// Pass printElement as a parameter.
list.forEach(printElement);
```

ä½ ä¹Ÿå¯ä»¥å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæ¯”å¦‚ï¼š

```dart
var loudify = (msg) => '!!! ${msg.toUpperCase()} !!!';
assert(loudify('hello') == '!!! HELLO !!!');
```

è¯¥ç¤ºä¾‹ä¸­ä½¿ç”¨äº†åŒ¿åå‡½æ•°ã€‚

## åŒ¿åå‡½æ•°

å¤§å¤šæ•°æ–¹æ³•éƒ½æ˜¯æœ‰åå­—çš„ï¼Œæ¯”å¦‚ main() æˆ– printElement()ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åå­—çš„æ–¹æ³•ï¼Œç§°ä¹‹ä¸º åŒ¿åå‡½æ•°ã€ Lambda è¡¨è¾¾å¼ æˆ– Closure é—­åŒ…ã€‚ä½ å¯ä»¥å°†åŒ¿åæ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ç„¶åä½¿ç”¨å®ƒï¼Œæ¯”å¦‚å°†è¯¥å˜é‡æ·»åŠ åˆ°é›†åˆæˆ–ä»ä¸­åˆ é™¤ã€‚

åŒ¿åæ–¹æ³•çœ‹èµ·æ¥ä¸å‘½åæ–¹æ³•ç±»ä¼¼ï¼Œåœ¨æ‹¬å·ä¹‹é—´å¯ä»¥å®šä¹‰å‚æ•°ï¼Œå‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†å‰²ã€‚

åé¢å¤§æ‹¬å·ä¸­çš„å†…å®¹åˆ™ä¸ºå‡½æ•°ä½“ï¼š

```dart
([[ç±»å‹] å‚æ•°[, â€¦]]) {
  å‡½æ•°ä½“;
};
```

ä¸‹é¢ä»£ç å®šä¹‰äº†åªæœ‰ä¸€ä¸ªå‚æ•° item ä¸”æ²¡æœ‰å‚æ•°ç±»å‹çš„åŒ¿åæ–¹æ³•ã€‚ List ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ‰“å°å…ƒç´ ä½ç½®å’Œå€¼çš„å­—ç¬¦ä¸²ï¼š

```dart
const list = ['apples', 'bananas', 'oranges'];
list.map((item) {
  return item.toUpperCase();
}).forEach((item) {
  print('$item: ${item.length}');
});
```

å¦‚æœå‡½æ•°ä½“å†…åªæœ‰ä¸€è¡Œè¿”å›è¯­å¥ï¼Œä½ å¯ä»¥ä½¿ç”¨èƒ–ç®­å¤´ç¼©å†™æ³•ã€‚

```dart
list
    .map((item) => item.toUpperCase())
    .forEach((item) => print('$item: ${item.length}'));
```

## è¯æ³•ä½œç”¨åŸŸ

Dart æ˜¯è¯æ³•æœ‰ä½œç”¨åŸŸè¯­è¨€ï¼Œå˜é‡çš„ä½œç”¨åŸŸåœ¨å†™ä»£ç çš„æ—¶å€™å°±ç¡®å®šäº†ï¼Œå¤§æ‹¬å·å†…å®šä¹‰çš„å˜é‡åªèƒ½åœ¨å¤§æ‹¬å·å†…è®¿é—®ï¼Œä¸ Java ç±»ä¼¼ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªåµŒå¥—å‡½æ•°ä¸­å˜é‡åœ¨å¤šä¸ªä½œç”¨åŸŸä¸­çš„ç¤ºä¾‹ï¼š

```dart
bool topLevel = true;

void main() {
  var insideMain = true;

  void myFunction() {
    var insideFunction = true;

    void nestedFunction() {
      var insideNestedFunction = true;

      assert(topLevel);
      assert(insideMain);
      assert(insideFunction);
      assert(insideNestedFunction);
    }
  }
}
```

æ³¨æ„ `nestedFunction()` å‡½æ•°å¯ä»¥è®¿é—®åŒ…æ‹¬é¡¶å±‚å˜é‡åœ¨å†…çš„æ‰€æœ‰çš„å˜é‡ã€‚

## è¯æ³•é—­åŒ…

é—­åŒ… å³ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå³ä½¿å‡½æ•°å¯¹è±¡çš„è°ƒç”¨åœ¨å®ƒåŸå§‹ä½œç”¨åŸŸä¹‹å¤–ï¼Œä¾ç„¶èƒ½å¤Ÿè®¿é—®åœ¨å®ƒè¯æ³•ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚

é—­åŒ… å³ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå³ä½¿å‡½æ•°å¯¹è±¡çš„è°ƒç”¨åœ¨å®ƒåŸå§‹ä½œç”¨åŸŸä¹‹å¤–ï¼Œä¾ç„¶èƒ½å¤Ÿè®¿é—®åœ¨å®ƒè¯æ³•ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚

```dart
/// Returns a function that adds [addBy] to the
/// function's argument.
Function makeAdder(int addBy) {
  return (int i) => addBy + i;
}

void main() {
  // Create a function that adds 2.
  var add2 = makeAdder(2);

  // Create a function that adds 4.
  var add4 = makeAdder(4);

  assert(add2(3) == 5);
  assert(add4(3) == 7);
}
```

## è¿”å›å€¼

æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰è¿”å›å€¼ã€‚æ²¡æœ‰æ˜¾ç¤ºè¿”å›è¯­å¥çš„å‡½æ•°æœ€åä¸€è¡Œé»˜è®¤ä¸ºæ‰§è¡Œ return nullã€‚

```dart
foo() {}

assert(foo() == null);
```

### è¿ç®—ç¬¦

Dart æ”¯æŒä¸‹è¡¨æ‰€ç¤ºçš„æ“ä½œç¬¦ï¼Œå®ƒä¹Ÿä½“ç°äº† Dart è¿ç®—ç¬¦çš„å…³è”æ€§å’Œ ä¼˜å…ˆçº§ çš„ä»é«˜åˆ°ä½çš„é¡ºåºã€‚è¿™ä¹Ÿæ˜¯ Dart è¿ç®—ç¬¦å…³ç³»çš„è¿‘ä¼¼å€¼ã€‚ä½ å¯ä»¥å°†è¿™äº›è¿ç®—ç¬¦å®ç°ä¸º ä¸€ä¸ªç±»çš„æˆå‘˜ã€‚

|        Description       |                            Operator                            | Associativity |
|:------------------------:|:--------------------------------------------------------------:|:-------------:|
|       unary postfix      |       expr++    expr--    ()    []    ?[]    .    ?.    !      |      None     |
|       unary prefix       | -expr    !expr    ~expr    ++expr    --expr      await expr    |      None     |
|      multiplicative      |                         *    /    %  ~/                        |      Left     |
|         additive         |                             +    -                             |      Left     |
|           shift          |                         <<    >>    >>>                        |      Left     |
|        bitwise AND       |                                &                               |      Left     |
|        bitwise XOR       |                                ^                               |      Left     |
|        bitwise OR        |                               \|                               |      Left     |
| relational and type test |              >=    >    <=    <    as    is    is!             |      None     |
|         equality         |                           ==    !=                             |      None     |
|        logical AND       |                               &&                               |      Left     |
|        logical OR        |                              \|\|                              |      Left     |
|          if null         |                               ??                               |      Left     |
|        conditional       |                      expr1 ? expr2 : expr3                     |     Right     |
|          cascade         |                            ..    ?..                           |      Left     |
|        assignment        |            =    *=    /=   +=   -=   &=   ^=   etc.            |     Right     |

:::tip
ä¸Šè¿°çš„è¡¨æ ¼åªæ˜¯ä½œä¸ºä¸€ä¸ªæ¯”è¾ƒå®ç”¨çš„æŒ‡å—ï¼Œæ“ä½œç¬¦çš„ä¼˜å…ˆçº§å’Œå…³è”æ€§æ¦‚å¿µæ˜¯ä»ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•ä¸­æ•´ç†å‘ç°çš„ã€‚
:::

ä¸€æ—¦ä½ ä½¿ç”¨äº†è¿ç®—ç¬¦ï¼Œå°±åˆ›å»ºäº†è¡¨è¾¾å¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›è¿ç®—ç¬¦è¡¨è¾¾å¼çš„ç¤ºä¾‹ï¼š

```dart
a++
a + b
a = b
a == b
c ? a : b
a is T
```

åœ¨ è¿ç®—ç¬¦è¡¨ ä¸­ï¼Œè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§æŒ‰å…ˆåæ’åˆ—ï¼Œå³ç¬¬ä¸€è¡Œä¼˜å…ˆçº§æœ€é«˜ï¼Œæœ€åä¸€è¡Œä¼˜å…ˆçº§æœ€ä½ï¼Œè€ŒåŒä¸€è¡Œä¸­ï¼Œæœ€å·¦è¾¹çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œæœ€å³è¾¹çš„ä¼˜å…ˆçº§æœ€ä½ã€‚ä¾‹å¦‚ï¼š% è¿ç®—ç¬¦ä¼˜å…ˆçº§é«˜äº == ï¼Œè€Œ == é«˜äº &&ã€‚æ ¹æ®ä¼˜å…ˆçº§è§„åˆ™ï¼Œé‚£ä¹ˆæ„å‘³ç€ä»¥ä¸‹ä¸¤è¡Œä»£ç æ‰§è¡Œçš„æ•ˆæœç›¸åŒï¼š

```dart
æ‹¬å·æé«˜äº†å¯è¯»æ€§ã€‚
if ((n % i == 0) && (d % i == 0)) ...

æ›´éš¾é˜…è¯»ï¼Œä½†ç­‰æ•ˆã€‚
if (n % i == 0 && d % i == 0) ...
```

## ç®—æœ¯è¿ç®—ç¬¦

Dart æ”¯æŒå¸¸ç”¨çš„ç®—æœ¯è¿ç®—ç¬¦ï¼š

|    +    |                     åŠ                      |
|:-------:|:------------------------------------------:|
|    -    |                     å‡                     |
| -è¡¨è¾¾å¼ | ä¸€å…ƒè´Ÿ, ä¹Ÿå¯ä»¥ä½œä¸ºåè½¬ï¼ˆåè½¬è¡¨è¾¾å¼çš„ç¬¦å·ï¼‰ |
|    *    |                     ä¹˜                     |
|    /    |                     é™¤                     |
|    ~/   |                  é™¤å¹¶å–æ•´                  |
|    %    |                    å–æ¨¡                    |

ç¤ºä¾‹ï¼š
```dart
assert(2 + 3 == 5);
assert(2 - 3 == -1);
assert(2 * 3 == 6);
assert(5 / 2 == 2.5); // Result is a double
assert(5 ~/ 2 == 2); // Result is an int
assert(5 % 2 == 1); // Remainder

assert('5/2 = ${5 ~/ 2} r ${5 % 2}' == '5/2 = 2 r 1');
```

Dart è¿˜æ”¯æŒè‡ªå¢è‡ªå‡æ“ä½œã€‚

```dart
| Operator++var | var = var + 1 (è¡¨è¾¾å¼çš„å€¼ä¸º var + 1) |
|:-------------:|:------------------------------------:|
|     var++     |   var = var + 1 (è¡¨è¾¾å¼çš„å€¼ä¸º var)   |
|     --var     | var = var - 1 (è¡¨è¾¾å¼çš„å€¼ä¸º var - 1) |
|     var--     |   var = var - 1 (è¡¨è¾¾å¼çš„å€¼ä¸º var)   |
```

ç¤ºä¾‹ï¼š

```dart
int a;
int b;

a = 0;
b = ++a; // Increment a before b gets its value.
assert(a == b); // 1 == 1

a = 0;
b = a++; // Increment a AFTER b gets its value.
assert(a != b); // 1 != 0

a = 0;
b = --a; // Decrement a before b gets its value.
assert(a == b); // -1 == -1

a = 0;
b = a--; // Decrement a AFTER b gets its value.
assert(a != b); // -1 != 0
```

## å…³ç³»è¿ç®—ç¬¦

ä¸‹è¡¨åˆ—å‡ºäº†å…³ç³»è¿ç®—ç¬¦åŠå«ä¹‰ï¼š

| Operator== |   ç›¸ç­‰   |
|:----------:|:--------:|
|     !=     |   ä¸ç­‰   |
|      >     |   å¤§äº   |
|      <     |   å°äº   |
|     >=     | å¤§äºç­‰äº |
|     <=     | å°äºç­‰äº |

è¦åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡ x å’Œ y æ˜¯å¦è¡¨ç¤ºç›¸åŒçš„äº‹ç‰©ä½¿ç”¨ == å³å¯ã€‚ï¼ˆåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ `identical()` å‡½æ•°æ¥ç¡®å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å®Œå…¨ç›¸åŒï¼‰ã€‚ä¸‹é¢æ˜¯ == è¿ç®—ç¬¦çš„ä¸€äº›è§„åˆ™ï¼š

1. å½“ x å’Œ y åŒæ—¶ä¸ºç©ºæ—¶è¿”å› trueï¼Œè€Œåªæœ‰ä¸€ä¸ªä¸ºç©ºæ—¶è¿”å› falseã€‚

2. è¿”å›å¯¹ x è°ƒç”¨ == æ–¹æ³•çš„ç»“æœï¼Œå‚æ•°ä¸º yã€‚ï¼ˆåƒ == è¿™æ ·çš„æ“ä½œç¬¦æ˜¯å¯¹å·¦ä¾§å†…å®¹è¿›è¡Œè°ƒç”¨çš„ã€‚

ä¸‹é¢çš„ä»£ç ç»™å‡ºäº†æ¯ä¸€ç§å…³ç³»è¿ç®—ç¬¦çš„ç¤ºä¾‹ï¼š

```dart
assert(2 == 2);
assert(2 != 3);
assert(3 > 2);
assert(2 < 3);
assert(3 >= 3);
assert(2 <= 3);
```

## ç±»å‹åˆ¤æ–­è¿ç®—ç¬¦

| Operator |             Meaning            |
|:--------:|:------------------------------:|
|    as    | ç±»å‹è½¬æ¢ï¼ˆä¹Ÿç”¨ä½œæŒ‡å®š åº“å‰ç¼€)ï¼‰ |
|    is    |  å¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šç±»å‹åˆ™è¿”å› true |
|    is!   | å¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šç±»å‹åˆ™è¿”å› false |

å½“ä¸”ä»…å½“ obj å®ç°äº† T çš„æ¥å£ï¼Œobj is T æ‰æ˜¯ trueã€‚ä¾‹å¦‚ obj is Object æ€»ä¸º trueï¼Œå› ä¸ºæ‰€æœ‰ç±»éƒ½æ˜¯ Object çš„å­ç±»ã€‚

ä»…å½“ä½ ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯è¯¥ç±»å‹çš„æ—¶å€™ï¼Œä½ æ‰å¯ä»¥ä½¿ç”¨ as æ“ä½œç¬¦å¯ä»¥æŠŠå¯¹è±¡è½¬æ¢ä¸ºç‰¹å®šçš„ç±»å‹ã€‚ä¾‹å¦‚ï¼š

```dart
(employee as Person).firstName = 'Bob';
```

å¦‚æœä½ ä¸ç¡®å®šè¿™ä¸ªå¯¹è±¡ç±»å‹æ˜¯ä¸æ˜¯ Tï¼Œè¯·åœ¨è½¬å‹å‰ä½¿ç”¨ is T æ£€æŸ¥ç±»å‹ã€‚

```dart
if (employee is Person) {
  // Type check
  employee.firstName = 'Bob';
}
```

:::tip
ä¸Šè¿°ä¸¤ç§æ–¹å¼æ˜¯æœ‰åŒºåˆ«çš„ï¼šå¦‚æœ employee ä¸º null æˆ–è€…ä¸ä¸º Person ç±»å‹ï¼Œåˆ™ç¬¬ä¸€ç§æ–¹å¼å°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œç¬¬äºŒç§ä¸ä¼šã€‚
:::

```dart
// Assign value to a
a = value;
// å¦‚æœ b ä¸ºç©ºï¼Œåˆ™ä¸º b èµ‹å€¼;å¦åˆ™ï¼Œb ä¿æŒä¸å˜
b ??= value;
```

åƒ += è¿™æ ·çš„èµ‹å€¼è¿ç®—ç¬¦å°†ç®—æ•°è¿ç®—ç¬¦å’Œèµ‹å€¼è¿ç®—ç¬¦ç»„åˆåœ¨äº†ä¸€èµ·ã€‚

|  = |  *= |  %= | >>>= |  ^= |
|:--:|:---:|:---:|:----:|:---:|
| += |  /= | <<= |  &=  | \|= |
| -= | ~/= | >>= |      |     |

ä¸‹è¡¨è§£é‡Šäº†å¤åˆè¿ç®—ç¬¦çš„åŸç†ï¼š

|        åœºæ™¯       | å¤åˆè¿ç®— | ç­‰æ•ˆè¡¨è¾¾å¼ |
|:-----------------:|:--------:|:----------:|
| å‡è®¾æœ‰è¿ç®—ç¬¦ opï¼š |  a op= b | a = a op b |
|       ç¤ºä¾‹ï¼š      |  a += b  |  a = a + b |

ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨èµ‹å€¼ä»¥åŠå¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼š

```dart
var a = 2; // Assign using =
a *= 3; // Assign and multiply: a = a * 3
assert(a == 6);
```

## é€»è¾‘è¿ç®—ç¬¦

ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ä½ å¯ä»¥åè½¬æˆ–ç»„åˆå¸ƒå°”è¡¨è¾¾å¼ã€‚

|  è¿ç®—ç¬¦ |                            æè¿°                           |
|:-------:|:---------------------------------------------------------:|
| !è¡¨è¾¾å¼ | å¯¹è¡¨è¾¾å¼ç»“æœå–åï¼ˆå³å°† true å˜ä¸º falseï¼Œfalse å˜ä¸º trueï¼‰ |
|   \|\|  |                           é€»è¾‘æˆ–                          |
|    &&   |                           é€»è¾‘ä¸                          |

ä¸‹é¢æ˜¯ä½¿ç”¨é€»è¾‘è¡¨è¾¾å¼çš„ç¤ºä¾‹ï¼š

```dart
if (!done && (col == 0 || col == 3)) {
  // ...Do something...
}
```

## æŒ‰ä½å’Œç§»ä½è¿ç®—ç¬¦

åœ¨ Dart ä¸­ï¼ŒäºŒè¿›åˆ¶ä½è¿ç®—ç¬¦å¯ä»¥æ“ä½œäºŒè¿›åˆ¶çš„æŸä¸€ä½ï¼Œä½†ä»…é€‚ç”¨äºæ•´æ•°ã€‚

|  è¿ç®—ç¬¦ |                     æè¿°                    |
|:-------:|:-------------------------------------------:|
|    &    |                    æŒ‰ä½ä¸                   |
|    \|   |                    æŒ‰ä½æˆ–                   |
|    ^    |                   æŒ‰ä½å¼‚æˆ–                  |
| ~è¡¨è¾¾å¼ | æŒ‰ä½å–åï¼ˆå³å°† â€œ0â€ å˜ä¸º â€œ1â€ï¼Œâ€œ1â€ å˜ä¸º â€œ0â€ï¼‰ |
|    <<   |                    ä½å·¦ç§»                   |
|    >>   |                    ä½å³ç§»                   |
|   >>>   |                  æ— ç¬¦å·å³ç§»                 |

ä¸‹é¢æ˜¯ä½¿ç”¨æŒ‰ä½å’Œç§»ä½è¿ç®—ç¬¦çš„ç¤ºä¾‹ï¼š

```dart
final value = 0x22;
final bitmask = 0x0f;

assert((value & bitmask) == 0x02); // AND
assert((value & ~bitmask) == 0x20); // AND NOT
assert((value | bitmask) == 0x2f); // OR
assert((value ^ bitmask) == 0x2d); // XOR
assert((value << 4) == 0x220); // Shift left
assert((value >> 4) == 0x02); // Shift right
assert((value >>> 4) == 0x02); // Unsigned shift right
assert((-value >> 4) == -0x03); // Shift right
assert((-value >>> 4) > 0); // Unsigned shift right
```

:::tip
>>> æ“ä½œç¬¦åœ¨ 2.14 ä»¥ä¸Šçš„ Dart ç‰ˆæœ¬ ä¸­å¯ç”¨ã€‚
:::

## æ¡ä»¶è¡¨è¾¾å¼

Dart æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„è¿ç®—ç¬¦å¯ä»¥ç”¨æ¥æ›¿ä»£ if-else è¯­å¥ï¼š

```dart
æ¡ä»¶ ? è¡¨è¾¾å¼ 1 : è¡¨è¾¾å¼ 2
```

å¦‚æœæ¡ä»¶ä¸º trueï¼Œæ‰§è¡Œè¡¨è¾¾å¼ 1å¹¶è¿”å›æ‰§è¡Œç»“æœï¼Œå¦åˆ™æ‰§è¡Œè¡¨è¾¾å¼ 2 å¹¶è¿”å›æ‰§è¡Œç»“æœã€‚

```dart
è¡¨è¾¾å¼ 1 ?? è¡¨è¾¾å¼ 2
```

å¦‚æœè¡¨è¾¾å¼ 1 ä¸ºé null åˆ™è¿”å›å…¶å€¼ï¼Œå¦åˆ™æ‰§è¡Œè¡¨è¾¾å¼ 2 å¹¶è¿”å›å…¶å€¼ã€‚

æ ¹æ®å¸ƒå°”è¡¨è¾¾å¼ç¡®å®šèµ‹å€¼æ—¶ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ ? å’Œ :

```dart
var visibility = isPublic ? 'public' : 'private';
```

å¦‚æœèµ‹å€¼æ˜¯æ ¹æ®åˆ¤å®šæ˜¯å¦ä¸º null åˆ™è€ƒè™‘ä½¿ç”¨ ??ã€‚

```dart
String playerName(String? name) => name ?? 'Guest';
```

ä¸Šè¿°ç¤ºä¾‹è¿˜å¯ä»¥å†™æˆè‡³å°‘ä¸‹é¢ä¸¤ç§ä¸åŒçš„å½¢å¼ï¼Œåªæ˜¯ä¸å¤Ÿç®€æ´ï¼š

```dart
// Slightly longer version uses ?: operator.
String playerName(String? name) => name != null ? name : 'Guest';

// Very long version uses if-else statement.
String playerName(String? name) {
  if (name != null) {
    return name;
  } else {
    return 'Guest';
  }
}
```

## çº§è”è¿ç®—ç¬¦

çº§è”è¿ç®—ç¬¦ (.., ?..) å¯ä»¥è®©ä½ åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šè¿ç»­è°ƒç”¨å¤šä¸ªå¯¹è±¡çš„å˜é‡æˆ–æ–¹æ³•ã€‚

æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```dart
var paint = Paint()
  ..color = Colors.black
  ..strokeCap = StrokeCap.round
  ..strokeWidth = 5.0;
```

å‰é¢çš„ç¤ºä¾‹ç­‰æ•ˆäºä»¥ä¸‹ä»£ç ï¼š

```dart
var paint = Paint();
paint.color = Colors.black;
paint.strokeCap = StrokeCap.round;
paint.strokeWidth = 5.0;
```

å¦‚æœçº§è”æ“ä½œçš„å¯¹è±¡å¯èƒ½ä¸º nullï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```dart
querySelector('#confirm') // Get an object.
  ?..text = 'Confirm' // Use its members.
  ..classes.add('important')
  ..onClick.listen((e) => window.alert('Confirmed!'))
  ..scrollIntoView();
```

:::tip
?.. è¿è¡Œåœ¨ 2.12 å’Œä»¥ä¸Šçš„ ç‰ˆæœ¬ ä¸­å¯ç”¨ã€‚
:::

ä¸Šé¢çš„ä»£ç ç›¸å½“äºï¼š

```dart
var button = querySelector('#confirm');
button?.text = 'Confirm';
button?.classes.add('important');
button?.onClick.listen((e) => window.alert('Confirmed!'));
button?.scrollIntoView();
```

çº§è”è¿ç®—ç¬¦å¯ä»¥åµŒå¥—ï¼Œä¾‹å¦‚ï¼š

```dart
final addressBook = (AddressBookBuilder()
      ..name = 'jenny'
      ..email = 'jenny@example.com'
      ..phone = (PhoneNumberBuilder()
            ..number = '415-555-0100'
            ..label = 'home')
          .build())
    .build();
```

åœ¨è¿”å›å¯¹è±¡çš„å‡½æ•°ä¸­è°¨æ…ä½¿ç”¨çº§è”æ“ä½œç¬¦ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„ï¼š

```dart
var sb = StringBuffer();
sb.write('foo')
  ..write('bar'); // Error: method 'write' isn't defined for 'void'.
```

:::tip
ä¸Šè¿°ä»£ç ä¸­çš„ sb.write() æ–¹æ³•è¿”å›çš„æ˜¯ voidï¼Œè¿”å›å€¼ä¸º void çš„æ–¹æ³•åˆ™ä¸èƒ½ä½¿ç”¨çº§è”è¿ç®—ç¬¦ã€‚

ä¸¥æ ¼æ¥è¯´ .. çº§è”æ“ä½œå¹¶éä¸€ä¸ªè¿ç®—ç¬¦è€Œæ˜¯ Dart çš„ç‰¹æ®Šè¯­æ³•ã€‚
:::

## å…¶ä»–è¿ç®—ç¬¦

å¤§å¤šæ•°å…¶å®ƒçš„è¿ç®—ç¬¦ï¼Œå·²ç»åœ¨å…¶å®ƒçš„ç¤ºä¾‹ä¸­ä½¿ç”¨è¿‡ï¼š

| è¿ç®—ç¬¦ |      åå­—     |                                                       æè¿°                                                      |
|:------:|:-------------:|:---------------------------------------------------------------------------------------------------------------:|
|   ()   |    ä½¿ç”¨æ–¹æ³•   |                                                 ä»£è¡¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•                                                |
|   []   |   è®¿é—® List   |                                            è®¿é—® List ä¸­ç‰¹å®šä½ç½®çš„å…ƒç´                                            |
|   ?[]  | åˆ¤ç©ºè®¿é—® List |                                  å·¦ä¾§è°ƒç”¨è€…ä¸ä¸ºç©ºæ—¶ï¼Œè®¿é—® List ä¸­ç‰¹å®šä½ç½®çš„å…ƒç´                                  |
|    .   |    è®¿é—®æˆå‘˜   |                                                    æˆå‘˜è®¿é—®ç¬¦                                                   |
|   ?.   |  æ¡ä»¶è®¿é—®æˆå‘˜ | ä¸ä¸Šè¿°æˆå‘˜è®¿é—®ç¬¦ç±»ä¼¼ï¼Œä½†æ˜¯å·¦è¾¹çš„æ“ä½œå¯¹è±¡ä¸èƒ½ä¸º nullï¼Œä¾‹å¦‚ foo?.barï¼Œå¦‚æœ foo ä¸º null åˆ™è¿”å› null ï¼Œå¦åˆ™è¿”å› bar |
|    !   |  ç©ºæ–­è¨€æ“ä½œç¬¦ | å°†è¡¨è¾¾å¼çš„ç±»å‹è½¬æ¢ä¸ºå…¶åŸºç¡€ç±»å‹ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ä¼šæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚ä¾‹å¦‚ foo!.barï¼Œå¦‚æœ foo ä¸º nullï¼Œåˆ™æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ |

## æµç¨‹æ§åˆ¶è¯­å¥

ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥æ§åˆ¶ Dart ä»£ç çš„æ‰§è¡Œæµç¨‹ï¼š

* if å’Œ else

* for å¾ªç¯

* while å’Œ do-while å¾ªç¯

* break å’Œ continue

* switch å’Œ case

* assert

ä½¿ç”¨ try-catch å’Œ throw ä¹Ÿèƒ½å½±å“æ§åˆ¶æµï¼Œ

## If å’Œ Else

Dart æ”¯æŒ if - else è¯­å¥ï¼Œå…¶ä¸­ else æ˜¯å¯é€‰çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ã€‚

```dart
if (isRaining()) {
  you.bringRainCoat();
} else if (isSnowing()) {
  you.wearJacket();
} else {
  car.putTopDown();
}
```
:::warning
Dart çš„ if è¯­å¥ä¸­çš„æ¡ä»¶å¿…é¡»æ˜¯å¸ƒå°”å€¼è€Œä¸èƒ½ä¸ºå…¶å®ƒç±»å‹ã€‚
:::

## For å¾ªç¯

ä½ å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ for å¾ªç¯è¿›è¡Œè¿­ä»£ã€‚ä¾‹å¦‚ï¼š

```dart
var message = StringBuffer('Dart is fun');
for (var i = 0; i < 5; i++) {
  message.write('!');
}
```

åœ¨ Dart è¯­è¨€ä¸­ï¼Œfor å¾ªç¯ä¸­çš„é—­åŒ…ä¼šè‡ªåŠ¨æ•è·å¾ªç¯çš„ ç´¢å¼•å€¼ ä»¥é¿å… JavaScript ä¸­ä¸€äº›å¸¸è§çš„é™·é˜±ã€‚å‡è®¾æœ‰å¦‚ä¸‹ä»£ç ï¼š

```dart
var callbacks = [];
for (var i = 0; i < 2; i++) {
  callbacks.add(i);
}

for (final c in callbacks) {
  print(c);
}
```

å¯è¿­ä»£å¯¹è±¡åŒæ—¶å¯ä»¥ä½¿ç”¨ forEach() æ–¹æ³•ä½œä¸ºå¦ä¸€ç§é€‰æ‹©ï¼š

```dart
var collection = [1, 2, 3];
collection.forEach(print); // 1 2 3
```

## While å’Œ Do-While

while å¾ªç¯ä¼šåœ¨æ‰§è¡Œå¾ªç¯ä½“å‰å…ˆåˆ¤æ–­æ¡ä»¶ï¼š

```dart
while (!isDone()) {
  doSomething();
}
```

do-while å¾ªç¯åˆ™ä¼š å…ˆæ‰§è¡Œä¸€éå¾ªç¯ä½“ å†åˆ¤æ–­æ¡ä»¶ï¼š

```dart
do {
  printLine();
} while (!atEndOfPage());
```

## Break å’Œ Continue

ä½¿ç”¨ break å¯ä»¥ä¸­æ–­å¾ªç¯ï¼š

```dart
while (true) {
  if (shutDownRequested()) break;
  processIncomingRequests();
}
```

ä½¿ç”¨ continue å¯ä»¥è·³è¿‡æœ¬æ¬¡å¾ªç¯ç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼š

```dart
for (int i = 0; i < candidates.length; i++) {
  var candidate = candidates[i];
  if (candidate.yearsExperience < 5) {
    continue;
  }
  candidate.interview();
}
```

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨è¯¸å¦‚ List æˆ– Set ä¹‹ç±»çš„ Iterable å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼é‡å†™ä¸Šè¿°ä¾‹å­:

```dart
candidates
    .where((c) => c.yearsExperience >= 5)
    .forEach((c) => c.interview());
```

## Switch å’Œ Case

Switch è¯­å¥åœ¨ Dart ä¸­ä½¿ç”¨ == æ¥æ¯”è¾ƒæ•´æ•°ã€å­—ç¬¦ä¸²æˆ–ç¼–è¯‘æ—¶å¸¸é‡ï¼Œæ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹ä¸”ä¸èƒ½æ˜¯å­ç±»å¹¶ä¸”æ²¡æœ‰é‡å†™ == æ“ä½œç¬¦ã€‚ æšä¸¾ç±»å‹éå¸¸é€‚åˆåœ¨ Switch è¯­å¥ä¸­ä½¿ç”¨ã€‚

:::tip
Dart ä¸­çš„ Switch è¯­å¥ä»…é€‚ç”¨äºæœ‰é™çš„æƒ…å†µï¼Œæ¯”å¦‚ä½¿ç”¨è§£é‡Šå™¨å’Œæ‰«æå™¨çš„åœºæ™¯ã€‚
:::

æ¯ä¸€ä¸ªéç©ºçš„ case å­å¥éƒ½å¿…é¡»æœ‰ä¸€ä¸ª break è¯­å¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ continueã€throw æˆ–è€… return æ¥ç»“æŸéç©º case è¯­å¥ã€‚

ä¸åŒ¹é…ä»»ä½• case è¯­å¥çš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œ default å­å¥ä¸­çš„ä»£ç ï¼š

```dart
var command = 'OPEN';
switch (command) {
  case 'CLOSED':
    executeClosed();
    break;
  case 'PENDING':
    executePending();
    break;
  case 'APPROVED':
    executeApproved();
    break;
  case 'DENIED':
    executeDenied();
    break;
  case 'OPEN':
    executeOpen();
    break;
  default:
    executeUnknown();
}
```

ä¸‹é¢çš„ä¾‹å­å¿½ç•¥äº† case å­å¥çš„ break è¯­å¥ï¼Œå› æ­¤ä¼šäº§ç”Ÿé”™è¯¯ï¼š

```dart
var command = 'OPEN';
switch (command) {
  case 'OPEN':
    executeOpen();
    // ERROR: Missing break

  case 'CLOSED':
    executeClosed();
    break;
}
```

ä½†æ˜¯ï¼ŒDart æ”¯æŒç©ºçš„ case è¯­å¥ï¼Œå…è®¸å…¶ä»¥ fall-through çš„å½¢å¼æ‰§è¡Œã€‚

```dart
var command = 'CLOSED';
switch (command) {
  case 'CLOSED': // Empty case falls through.
  case 'NOW_CLOSED':
    // Runs for both CLOSED and NOW_CLOSED.
    executeNowClosed();
    break;
}
```

åœ¨éç©º case è¯­å¥ä¸­æƒ³è¦å®ç° fall-through çš„å½¢å¼ï¼Œå¯ä»¥ä½¿ç”¨ continue è¯­å¥é…åˆ label çš„æ–¹å¼å®ç°:

```dart
var command = 'CLOSED';
switch (command) {
  case 'CLOSED':
    executeClosed();
    continue nowClosed;
  // Continues executing at the nowClosed label.

  nowClosed:
  case 'NOW_CLOSED':
    // Runs for both CLOSED and NOW_CLOSED.
    executeNowClosed();
    break;
}
```

æ¯ä¸ª case å­å¥éƒ½å¯ä»¥æœ‰å±€éƒ¨å˜é‡ä¸”ä»…åœ¨è¯¥ case è¯­å¥å†…å¯è§ã€‚

## æ–­è¨€

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸º false æ—¶ä½¿ç”¨ â€” assert(æ¡ä»¶, å¯é€‰ä¿¡æ¯); â€” è¯­å¥æ¥æ‰“æ–­ä»£ç çš„æ‰§è¡Œã€‚ä½ å¯ä»¥åœ¨æœ¬æ–‡ä¸­æ‰¾åˆ°å¤§é‡ä½¿ç”¨ assert çš„ä¾‹å­ã€‚

```dart
// Make sure the variable has a non-null value.
assert(text != null);

// Make sure the value is less than 100.
assert(number < 100);

// Make sure this is an https URL.
assert(urlString.startsWith('https'));
```

assert çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¸ºå…¶æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²æ¶ˆæ¯ã€‚

```dart
assert(urlString.startsWith('https'),
    'URL ($urlString) should start with "https".');
```

assert çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å€¼ä¸ºå¸ƒå°”å€¼çš„ä»»ä½•è¡¨è¾¾å¼ã€‚å¦‚æœè¡¨è¾¾å¼çš„å€¼ä¸º trueï¼Œåˆ™æ–­è¨€æˆåŠŸï¼Œç»§ç»­æ‰§è¡Œã€‚å¦‚æœè¡¨è¾¾å¼çš„å€¼ä¸º falseï¼Œåˆ™æ–­è¨€å¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ª AssertionError å¼‚å¸¸ã€‚

å¦‚ä½•åˆ¤æ–­æ–­è¨€æ˜¯å¦ç”Ÿæ•ˆï¼Ÿæ–­è¨€æ˜¯å¦ç”Ÿæ•ˆä¾èµ–å¼€å‘å·¥å…·å’Œä½¿ç”¨çš„æ¡†æ¶ï¼š

* Flutter åœ¨ è°ƒè¯•æ¨¡å¼ æ—¶ç”Ÿæ•ˆã€‚

* ä¸€äº›å¼€å‘å·¥å…·æ¯”å¦‚ [webdev serve][] é€šå¸¸æƒ…å†µä¸‹æ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ã€‚

* å…¶ä»–ä¸€äº›å·¥å…·ï¼Œæ¯”å¦‚ dart run ä»¥åŠ [dart compile js][] é€šè¿‡åœ¨è¿è¡Œ Dart ç¨‹åºæ—¶æ·»åŠ å‘½ä»¤è¡Œå‚æ•° --enable-asserts ä½¿ assert ç”Ÿæ•ˆã€‚

åœ¨ç”Ÿäº§ç¯å¢ƒä»£ç ä¸­ï¼Œæ–­è¨€ä¼šè¢«å¿½ç•¥ï¼Œä¸æ­¤åŒæ—¶ä¼ å…¥ assert çš„å‚æ•°ä¸è¢«åˆ¤æ–­ã€‚

## å¼‚å¸¸

Dart ä»£ç å¯ä»¥æŠ›å‡ºå’Œæ•è·å¼‚å¸¸ã€‚å¼‚å¸¸è¡¨ç¤ºä¸€äº›æœªçŸ¥çš„é”™è¯¯æƒ…å†µï¼Œå¦‚æœå¼‚å¸¸æ²¡æœ‰æ•è·åˆ™ä¼šè¢«æŠ›å‡ºä»è€Œå¯¼è‡´æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ç»ˆæ­¢æ‰§è¡Œã€‚

ä¸ Java ä¸åŒçš„æ˜¯ï¼ŒDart çš„æ‰€æœ‰å¼‚å¸¸éƒ½æ˜¯éå¿…æ£€å¼‚å¸¸ï¼Œæ–¹æ³•ä¸å¿…å£°æ˜ä¼šæŠ›å‡ºå“ªäº›å¼‚å¸¸ï¼Œå¹¶ä¸”ä½ ä¹Ÿä¸å¿…æ•è·ä»»ä½•å¼‚å¸¸ã€‚

Dart æä¾›äº† Exception å’Œ Error ä¸¤ç§ç±»å‹çš„å¼‚å¸¸ä»¥åŠå®ƒä»¬ä¸€ç³»åˆ—çš„å­ç±»ï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ç±»å‹ã€‚ä½†æ˜¯åœ¨ Dart ä¸­å¯ä»¥å°†ä»»ä½•é null å¯¹è±¡ä½œä¸ºå¼‚å¸¸æŠ›å‡ºè€Œä¸å±€é™äº Exception æˆ– Error ç±»å‹ã€‚

## æŠ›å‡ºå¼‚å¸¸

ä¸‹é¢æ˜¯å…³äºæŠ›å‡ºæˆ–è€… å¼•å‘ å¼‚å¸¸çš„ç¤ºä¾‹ï¼š

```dart
throw FormatException('Expected at least 1 section');
```

ä½ ä¹Ÿå¯ä»¥æŠ›å‡ºä»»æ„çš„å¯¹è±¡ï¼š

```dart
throw 'Out of llamas!';
```

å› ä¸ºæŠ›å‡ºå¼‚å¸¸æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ => è¯­å¥ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–ä½¿ç”¨è¡¨è¾¾å¼çš„åœ°æ–¹æŠ›å‡ºå¼‚å¸¸ï¼š

```dart
void distanceTo(Point other) => throw UnimplementedError();
```

## æ•è·å¼‚å¸¸

æ•è·å¼‚å¸¸å¯ä»¥é¿å…å¼‚å¸¸ç»§ç»­ä¼ é€’ï¼ˆé‡æ–°æŠ›å‡ºå¼‚å¸¸é™¤å¤–ï¼‰ã€‚æ•è·ä¸€ä¸ªå¼‚å¸¸å¯ä»¥ç»™ä½ å¤„ç†å®ƒçš„æœºä¼šï¼š

```dart
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  buyMoreLlamas();
}
```

å¯¹äºå¯ä»¥æŠ›å‡ºå¤šç§å¼‚å¸¸ç±»å‹çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤šä¸ª catch è¯­å¥ï¼Œæ¯ä¸ªè¯­å¥åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå¼‚å¸¸ç±»å‹ï¼Œå¦‚æœ catch è¯­å¥æ²¡æœ‰æŒ‡å®šå¼‚å¸¸ç±»å‹åˆ™è¡¨ç¤ºå¯ä»¥æ•è·ä»»æ„å¼‚å¸¸ç±»å‹ï¼š

```dart
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // A specific exception
  buyMoreLlamas();
} on Exception catch (e) {
  // Anything else that is an exception
  print('Unknown exception: $e');
} catch (e) {
  // No specified type, handles all
  print('Something really unknown: $e');
}
```

å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºå¯ä»¥ä½¿ç”¨ `on` æˆ– `catch` æ¥æ•è·å¼‚å¸¸ï¼Œä½¿ç”¨ `on` æ¥æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œä½¿ç”¨ `catch` æ¥æ•è·å¼‚å¸¸å¯¹è±¡ï¼Œä¸¤è€…å¯åŒæ—¶ä½¿ç”¨ã€‚

ä½ å¯ä»¥ä¸º catch æ–¹æ³•æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ ˆä¿¡æ¯ StackTrace å¯¹è±¡ï¼š

```dart
try {
  // Â·Â·Â·
} on Exception catch (e) {
  print('Exception details:\n $e');
} catch (e, s) {
  print('Exception details:\n $e');
  print('Stack trace:\n $s');
}
```

å…³é”®å­— rethrow å¯ä»¥å°†æ•è·çš„å¼‚å¸¸å†æ¬¡æŠ›å‡ºï¼š

```dart
void misbehave() {
  try {
    dynamic foo = true;
    print(foo++); // Runtime error
  } catch (e) {
    print('misbehave() partially handled ${e.runtimeType}.');
    rethrow; // Allow callers to see the exception.
  }
}

void main() {
  try {
    misbehave();
  } catch (e) {
    print('main() finished handling ${e.runtimeType}.');
  }
}
```

## Finally

æ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼Œfinally è¯­å¥å§‹ç»ˆæ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š catch è¯­å¥æ¥æ•è·å¼‚å¸¸ï¼Œåˆ™å¼‚å¸¸ä¼šåœ¨æ‰§è¡Œå®Œ finally è¯­å¥åæŠ›å‡ºï¼š

```dart
try {
  breedMoreLlamas();
} finally {
  // Always clean up, even if an exception is thrown.
  cleanLlamaStalls();
}
```

finally è¯­å¥ä¼šåœ¨ä»»ä½•åŒ¹é…çš„ catch è¯­å¥åæ‰§è¡Œï¼š

```dart
try {
  breedMoreLlamas();
} catch (e) {
  print('Error: $e'); // Handle the exception first.
} finally {
  cleanLlamaStalls(); // Then clean up.
}
```

## ç±»